

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>skyllh.analyses.i3.publicdata_ps package &mdash; SkyLLH  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=5929fcd5"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="skyllh.cluster package" href="skyllh.cluster.html" />
    <link rel="prev" title="skyllh.analyses.i3 package" href="skyllh.analyses.i3.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            SkyLLH
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hypothesis/index.html">Hypothesis Definition</a></li>
<li class="toctree-l1"><a class="reference internal" href="../unit_tests.html">Unit tests</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="skyllh.html">skyllh package</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="skyllh.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="skyllh.analyses.html">skyllh.analyses package</a><ul class="current">
<li class="toctree-l4 current"><a class="reference internal" href="skyllh.analyses.html#subpackages">Subpackages</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="skyllh.cluster.html">skyllh.cluster package</a></li>
<li class="toctree-l3"><a class="reference internal" href="skyllh.core.html">skyllh.core package</a></li>
<li class="toctree-l3"><a class="reference internal" href="skyllh.datasets.html">skyllh.datasets package</a></li>
<li class="toctree-l3"><a class="reference internal" href="skyllh.i3.html">skyllh.i3 package</a></li>
<li class="toctree-l3"><a class="reference internal" href="skyllh.physics.html">skyllh.physics package</a></li>
<li class="toctree-l3"><a class="reference internal" href="skyllh.plotting.html">skyllh.plotting package</a></li>
<li class="toctree-l3"><a class="reference internal" href="skyllh.utils.html">skyllh.utils package</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../notes.html">Notes</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dev_docs/logging.html">Logging</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">SkyLLH</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="skyllh.html">skyllh package</a></li>
          <li class="breadcrumb-item"><a href="skyllh.analyses.html">skyllh.analyses package</a></li>
          <li class="breadcrumb-item"><a href="skyllh.analyses.i3.html">skyllh.analyses.i3 package</a></li>
      <li class="breadcrumb-item active">skyllh.analyses.i3.publicdata_ps package</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/reference/skyllh.analyses.i3.publicdata_ps.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-skyllh.analyses.i3.publicdata_ps">
<span id="skyllh-analyses-i3-publicdata-ps-package"></span><h1>skyllh.analyses.i3.publicdata_ps package<a class="headerlink" href="#module-skyllh.analyses.i3.publicdata_ps" title="Link to this heading"></a></h1>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Link to this heading"></a></h2>
</section>
<section id="module-skyllh.analyses.i3.publicdata_ps.aeff">
<span id="skyllh-analyses-i3-publicdata-ps-aeff-module"></span><h2>skyllh.analyses.i3.publicdata_ps.aeff module<a class="headerlink" href="#module-skyllh.analyses.i3.publicdata_ps.aeff" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.aeff.load_effective_area_array">
<span class="sig-prename descclassname"><span class="pre">skyllh.analyses.i3.publicdata_ps.aeff.</span></span><span class="sig-name descname"><span class="pre">load_effective_area_array</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pathfilenames</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.aeff.load_effective_area_array" title="Link to this definition"></a></dt>
<dd><p>Loads the (nbins_decnu, nbins_log10enu)-shaped 2D effective
area array from the given data file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>pathfilename</strong> (<em>str</em><em> | </em><em>list</em><em> of </em><em>str</em>) – The file name of the data file.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>aeff_decnu_log10enu</strong> (<em>(nbins_decnu, nbins_log10enu)-shaped 2D ndarray</em>) – The ndarray holding the effective area for each
(dec_nu,log10(E_nu/GeV)) bin.</p></li>
<li><p><strong>decnu_binedges_lower</strong> (<em>(nbins_decnu,)-shaped ndarray</em>) – The ndarray holding the lower bin edges of the dec_nu axis.</p></li>
<li><p><strong>decnu_binedges_upper</strong> (<em>(nbins_decnu,)-shaped ndarray</em>) – The ndarray holding the upper bin edges of the dec_nu axis.</p></li>
<li><p><strong>log10_enu_binedges_lower</strong> (<em>(nbins_log10enu,)-shaped ndarray</em>) – The ndarray holding the lower bin edges of the log10(E_nu/GeV) axis.</p></li>
<li><p><strong>log10_enu_binedges_upper</strong> (<em>(nbins_log10enu,)-shaped ndarray</em>) – The ndarray holding the upper bin edges of the log10(E_nu/GeV) axis.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.aeff.PDAeff">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">skyllh.analyses.i3.publicdata_ps.aeff.</span></span><span class="sig-name descname"><span class="pre">PDAeff</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pathfilenames</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_dec</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_log10enu</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_log10enu</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.aeff.PDAeff" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This class provides a representation of the effective area provided by
the public data.</p>
<p>Creates an effective area instance by loading the effective area
data from the given file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pathfilenames</strong> (<em>str</em><em> | </em><em>list</em><em> of </em><em>str</em>) – The path file names of the effective area data file(s) which should
be used for this public data effective area instance.</p></li>
<li><p><strong>src_dec</strong> (<em>float</em><em> | </em><em>None</em>) – The source declination in radians for which detection probabilities
should get pre-calculated using the <code class="docutils literal notranslate"><span class="pre">get_detection_prob_for_decnu</span></code>
method.</p></li>
<li><p><strong>min_log10enu</strong> (<em>float</em><em> | </em><em>None</em>) – The minimum log10(E_nu/GeV) value that should be used for
calculating the detection probability.
If None, the lowest available neutrino energy bin edge of the
effective area is used.</p></li>
<li><p><strong>max_log10enu</strong> (<em>float</em><em> | </em><em>None</em>) – The maximum log10(E_nu/GeV) value that should be used for
calculating the detection probability.
If None, the highest available neutrino energy bin edge of the
effective area is used.</p></li>
</ul>
</dd>
</dl>
<dl class="py property">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.aeff.PDAeff.decnu_binedges">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">decnu_binedges</span></span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.aeff.PDAeff.decnu_binedges" title="Link to this definition"></a></dt>
<dd><p>(read-only) The bin edges of the neutrino declination axis in
radians.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.aeff.PDAeff.sin_decnu_binedges">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">sin_decnu_binedges</span></span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.aeff.PDAeff.sin_decnu_binedges" title="Link to this definition"></a></dt>
<dd><p>(read-only) The sin of the bin edges of the neutrino declination
in radians.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.aeff.PDAeff.decnu_bincenters">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">decnu_bincenters</span></span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.aeff.PDAeff.decnu_bincenters" title="Link to this definition"></a></dt>
<dd><p>(read-only) The bin center values of the neutrino declination axis in
radians.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.aeff.PDAeff.n_decnu_bins">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">n_decnu_bins</span></span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.aeff.PDAeff.n_decnu_bins" title="Link to this definition"></a></dt>
<dd><p>(read-only) The number of bins of the neutrino declination axis.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.aeff.PDAeff.log10_enu_binedges">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">log10_enu_binedges</span></span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.aeff.PDAeff.log10_enu_binedges" title="Link to this definition"></a></dt>
<dd><p>(read-only) The bin edges of the log10(E_nu/GeV) neutrino energy
axis.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.aeff.PDAeff.log10_enu_bincenters">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">log10_enu_bincenters</span></span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.aeff.PDAeff.log10_enu_bincenters" title="Link to this definition"></a></dt>
<dd><p>(read-only) The bin center values of the log10(E_nu/GeV) neutrino
energy axis.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.aeff.PDAeff.n_log10_enu_bins">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">n_log10_enu_bins</span></span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.aeff.PDAeff.n_log10_enu_bins" title="Link to this definition"></a></dt>
<dd><p>(read-only) The number of bins of the log10 neutrino energy axis.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.aeff.PDAeff.aeff_decnu_log10enu">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">aeff_decnu_log10enu</span></span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.aeff.PDAeff.aeff_decnu_log10enu" title="Link to this definition"></a></dt>
<dd><p>(read-only) The effective area in cm^2 as (n_decnu,n_log10enu)-shaped
2D numpy ndarray.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.aeff.PDAeff.__firstlineno__">
<span class="sig-name descname"><span class="pre">__firstlineno__</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">97</span></em><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.aeff.PDAeff.__firstlineno__" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.aeff.PDAeff.__static_attributes__">
<span class="sig-name descname"><span class="pre">__static_attributes__</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">('_aeff_decnu_log10enu',</span> <span class="pre">'_decnu_binedges',</span> <span class="pre">'_decnu_binedges_lower',</span> <span class="pre">'_decnu_binedges_upper',</span> <span class="pre">'_log10_enu_binedges',</span> <span class="pre">'_log10_enu_binedges_lower',</span> <span class="pre">'_log10_enu_binedges_upper',</span> <span class="pre">'det_prob')</span></em><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.aeff.PDAeff.__static_attributes__" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.aeff.PDAeff.create_sin_decnu_log10_enu_spline">
<span class="sig-name descname"><span class="pre">create_sin_decnu_log10_enu_spline</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.aeff.PDAeff.create_sin_decnu_log10_enu_spline" title="Link to this definition"></a></dt>
<dd><p>DEPRECATED!
Creates a FctSpline2D object representing a 2D spline of the
effective area in sin(dec_nu)-log10(E_nu/GeV)-space.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>spl</strong> (<em>FctSpline2D instance</em>) – The FctSpline2D instance representing a spline in the
sin(dec_nu)-log10(E_nu/GeV)-space.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.aeff.PDAeff.get_aeff_for_decnu">
<span class="sig-name descname"><span class="pre">get_aeff_for_decnu</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">decnu</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.aeff.PDAeff.get_aeff_for_decnu" title="Link to this definition"></a></dt>
<dd><p>Retrieves the effective area as function of log10_enu.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>decnu</strong> (<em>float</em>) – The true neutrino declination.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>aeff</strong> (<em>(n,)-shaped numpy ndarray</em>) – The effective area in cm^2 for the given true neutrino declination
as a function of log10 true neutrino energy.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.aeff.PDAeff.get_detection_prob_for_decnu">
<span class="sig-name descname"><span class="pre">get_detection_prob_for_decnu</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">decnu</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enu_min</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enu_max</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enu_range_min</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enu_range_max</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.aeff.PDAeff.get_detection_prob_for_decnu" title="Link to this definition"></a></dt>
<dd><p>Calculates the detection probability for given true neutrino energy
ranges for a given neutrino declination.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>decnu</strong> (<em>float</em>) – The neutrino declination in radians.</p></li>
<li><p><strong>enu_min</strong> (<em>float</em><em> | </em><em>ndarray</em><em> of </em><em>float</em>) – The minimum energy in GeV.</p></li>
<li><p><strong>enu_max</strong> (<em>float</em><em> | </em><em>ndarray</em><em> of </em><em>float</em>) – The maximum energy in GeV.</p></li>
<li><p><strong>enu_range_min</strong> (<em>float</em>) – The minimum energy in GeV of the entire energy range.</p></li>
<li><p><strong>enu_range_max</strong> (<em>float</em>) – The maximum energy in GeV of the entire energy range.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>det_prob</strong> (<em>ndarray of float</em>) – The neutrino energy detection probabilities for the given true
enegry ranges.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-skyllh.analyses.i3.publicdata_ps.backgroundpdf">
<span id="skyllh-analyses-i3-publicdata-ps-backgroundpdf-module"></span><h2>skyllh.analyses.i3.publicdata_ps.backgroundpdf module<a class="headerlink" href="#module-skyllh.analyses.i3.publicdata_ps.backgroundpdf" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.backgroundpdf.PDEnergyPDF">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">skyllh.analyses.i3.publicdata_ps.backgroundpdf.</span></span><span class="sig-name descname"><span class="pre">PDEnergyPDF</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_logE</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_sinDec</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_mcweight</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_physicsweight</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logE_binning</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sinDec_binning</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">smoothing_filter</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kde_smoothing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.backgroundpdf.PDEnergyPDF" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="skyllh.core.html#skyllh.core.pdf.EnergyPDF" title="skyllh.core.pdf.EnergyPDF"><code class="xref py py-class docutils literal notranslate"><span class="pre">EnergyPDF</span></code></a>, <a class="reference internal" href="skyllh.core.html#skyllh.core.binning.UsesBinning" title="skyllh.core.binning.UsesBinning"><code class="xref py py-class docutils literal notranslate"><span class="pre">UsesBinning</span></code></a></p>
<p>This is the base class for IceCube specific energy PDF models.
IceCube energy PDFs depend solely on the energy and the
zenith angle, and hence, on the declination of the event.</p>
<p>The IceCube energy PDF is modeled as a 1d histogram in energy,
but for different sin(declination) bins, hence, stored as a 2d histogram.</p>
<p>Creates a new IceCube energy PDF object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data_logE</strong> (<em>1d ndarray</em>) – The array holding the log10(E) values of the events.</p></li>
<li><p><strong>data_sinDec</strong> (<em>1d ndarray</em>) – The array holding the sin(dec) values of the events.</p></li>
<li><p><strong>data_mcweight</strong> (<em>1d ndarray</em>) – The array holding the monte-carlo weights of the events.
The final data weight will be the product of data_mcweight and
data_physicsweight.</p></li>
<li><p><strong>data_physicsweight</strong> (<em>1d ndarray</em>) – The array holding the physics weights of the events.
The final data weight will be the product of data_mcweight and
data_physicsweight.</p></li>
<li><p><strong>logE_binning</strong> (<a class="reference internal" href="skyllh.core.html#skyllh.core.binning.BinningDefinition" title="skyllh.core.binning.BinningDefinition"><em>BinningDefinition</em></a>) – The binning definition for the log(E) axis.</p></li>
<li><p><strong>sinDec_binning</strong> (<a class="reference internal" href="skyllh.core.html#skyllh.core.binning.BinningDefinition" title="skyllh.core.binning.BinningDefinition"><em>BinningDefinition</em></a>) – The binning definition for the sin(declination) axis.</p></li>
<li><p><strong>smoothing_filter</strong> (<em>SmoothingFilter instance</em><em> | </em><em>None</em>) – The smoothing filter to use for smoothing the energy histogram.
If None, no smoothing will be applied.</p></li>
<li><p><strong>kde_smoothing</strong> (<em>bool</em>) – Apply a kde smoothing to the energy pdf for each bin in sin(dec).
This is useful for signal injections, because it ensures that the
background is not zero when injecting high energy events.
Default: False.</p></li>
</ul>
</dd>
</dl>
<dl class="py property">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.backgroundpdf.PDEnergyPDF.hist_smoothing_method">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">hist_smoothing_method</span></span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.backgroundpdf.PDEnergyPDF.hist_smoothing_method" title="Link to this definition"></a></dt>
<dd><p>The HistSmoothingMethod instance defining the smoothing filter of the
energy PDF histogram.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.backgroundpdf.PDEnergyPDF.hist">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">hist</span></span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.backgroundpdf.PDEnergyPDF.hist" title="Link to this definition"></a></dt>
<dd><p>(read-only) The 2D logE-sinDec histogram array.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.backgroundpdf.PDEnergyPDF.hist_mask_mc_covered">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">hist_mask_mc_covered</span></span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.backgroundpdf.PDEnergyPDF.hist_mask_mc_covered" title="Link to this definition"></a></dt>
<dd><p>(read-only) The boolean ndarray holding the mask of the 2D histogram
bins for which there is monte-carlo coverage.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.backgroundpdf.PDEnergyPDF.hist_mask_mc_covered_zero_physics">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">hist_mask_mc_covered_zero_physics</span></span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.backgroundpdf.PDEnergyPDF.hist_mask_mc_covered_zero_physics" title="Link to this definition"></a></dt>
<dd><p>(read-only) The boolean ndarray holding the mask of the 2D histogram
bins for which there is monte-carlo coverage but zero physics
contribution.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.backgroundpdf.PDEnergyPDF.hist_mask_mc_covered_with_physics">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">hist_mask_mc_covered_with_physics</span></span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.backgroundpdf.PDEnergyPDF.hist_mask_mc_covered_with_physics" title="Link to this definition"></a></dt>
<dd><p>(read-only) The boolean ndarray holding the mask of the 2D histogram
bins for which there is monte-carlo coverage and has physics
contribution.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.backgroundpdf.PDEnergyPDF.get_prob">
<span class="sig-name descname"><span class="pre">get_prob</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tdm</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fitparams</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tl</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.backgroundpdf.PDEnergyPDF.get_prob" title="Link to this definition"></a></dt>
<dd><p>Calculates the energy probability (in logE) of each event.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tdm</strong> (<em>instance</em><em> of </em><a class="reference internal" href="skyllh.core.html#skyllh.core.trialdata.TrialDataManager" title="skyllh.core.trialdata.TrialDataManager"><em>TrialDataManager</em></a>) – <p>The TrialDataManager instance holding the data events for which the
probability should be calculated for. The following data fields must
exist:</p>
<ul>
<li><dl class="simple">
<dt>’log_energy’<span class="classifier">float</span></dt><dd><p>The logarithm of the energy value of the event.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>’sin_dec’<span class="classifier">float</span></dt><dd><p>The sin(declination) value of the event.</p>
</dd>
</dl>
</li>
</ul>
</p></li>
<li><p><strong>fitparams</strong> (<em>None</em>) – Unused interface parameter.</p></li>
<li><p><strong>tl</strong> (<em>TimeLord instance</em><em> | </em><em>None</em>) – The optional TimeLord instance that should be used to measure
timing information.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>prob</strong> (<em>1D (N_events,) shaped ndarray</em>) – The array with the energy probability for each event.</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.backgroundpdf.PDEnergyPDF.__firstlineno__">
<span class="sig-name descname"><span class="pre">__firstlineno__</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">28</span></em><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.backgroundpdf.PDEnergyPDF.__firstlineno__" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.backgroundpdf.PDEnergyPDF.__static_attributes__">
<span class="sig-name descname"><span class="pre">__static_attributes__</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">('_hist_logE_sinDec',</span> <span class="pre">'_hist_mask_mc_covered',</span> <span class="pre">'_hist_mask_mc_covered_zero_physics',</span> <span class="pre">'_hist_smoothing_method',</span> <span class="pre">'hist_smoothing_method')</span></em><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.backgroundpdf.PDEnergyPDF.__static_attributes__" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.backgroundpdf.PDDataBackgroundI3EnergyPDF">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">skyllh.analyses.i3.publicdata_ps.backgroundpdf.</span></span><span class="sig-name descname"><span class="pre">PDDataBackgroundI3EnergyPDF</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_exp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logE_binning</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sinDec_binning</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">smoothing_filter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kde_smoothing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.backgroundpdf.PDDataBackgroundI3EnergyPDF" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#skyllh.analyses.i3.publicdata_ps.backgroundpdf.PDEnergyPDF" title="skyllh.analyses.i3.publicdata_ps.backgroundpdf.PDEnergyPDF"><code class="xref py py-class docutils literal notranslate"><span class="pre">PDEnergyPDF</span></code></a>, <a class="reference internal" href="skyllh.core.html#skyllh.core.pdf.IsBackgroundPDF" title="skyllh.core.pdf.IsBackgroundPDF"><code class="xref py py-class docutils literal notranslate"><span class="pre">IsBackgroundPDF</span></code></a></p>
<p>This is the IceCube energy background PDF, which gets constructed from
experimental data. This class is derived from I3EnergyPDF.</p>
<p>Constructs a new IceCube energy background PDF from experimental
data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data_exp</strong> (<em>instance</em><em> of </em><a class="reference internal" href="skyllh.core.html#skyllh.core.storage.DataFieldRecordArray" title="skyllh.core.storage.DataFieldRecordArray"><em>DataFieldRecordArray</em></a>) – <p>The array holding the experimental data. The following data fields
must exist:</p>
<ul>
<li><dl class="simple">
<dt>’log_energy’<span class="classifier">float</span></dt><dd><p>The logarithm of the reconstructed energy value of the data
event.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>’sin_dec’<span class="classifier">float</span></dt><dd><p>The sine of the reconstructed declination of the data event.</p>
</dd>
</dl>
</li>
</ul>
</p></li>
<li><p><strong>logE_binning</strong> (<a class="reference internal" href="skyllh.core.html#skyllh.core.binning.BinningDefinition" title="skyllh.core.binning.BinningDefinition"><em>BinningDefinition</em></a>) – The binning definition for the binning in log10(E).</p></li>
<li><p><strong>sinDec_binning</strong> (<a class="reference internal" href="skyllh.core.html#skyllh.core.binning.BinningDefinition" title="skyllh.core.binning.BinningDefinition"><em>BinningDefinition</em></a>) – The binning definition for the sin(declination).</p></li>
<li><p><strong>smoothing_filter</strong> (<em>SmoothingFilter instance</em><em> | </em><em>None</em>) – The smoothing filter to use for smoothing the energy histogram.
If None, no smoothing will be applied.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.backgroundpdf.PDDataBackgroundI3EnergyPDF.__annotations__">
<span class="sig-name descname"><span class="pre">__annotations__</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{}</span></em><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.backgroundpdf.PDDataBackgroundI3EnergyPDF.__annotations__" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.backgroundpdf.PDDataBackgroundI3EnergyPDF.__firstlineno__">
<span class="sig-name descname"><span class="pre">__firstlineno__</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">265</span></em><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.backgroundpdf.PDDataBackgroundI3EnergyPDF.__firstlineno__" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.backgroundpdf.PDDataBackgroundI3EnergyPDF.__static_attributes__">
<span class="sig-name descname"><span class="pre">__static_attributes__</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">()</span></em><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.backgroundpdf.PDDataBackgroundI3EnergyPDF.__static_attributes__" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.backgroundpdf.PDMCBackgroundI3EnergyPDF">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">skyllh.analyses.i3.publicdata_ps.backgroundpdf.</span></span><span class="sig-name descname"><span class="pre">PDMCBackgroundI3EnergyPDF</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pdf_log10emu_sindecmu</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log10emu_binning</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sindecmu_binning</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.backgroundpdf.PDMCBackgroundI3EnergyPDF" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="skyllh.core.html#skyllh.core.pdf.EnergyPDF" title="skyllh.core.pdf.EnergyPDF"><code class="xref py py-class docutils literal notranslate"><span class="pre">EnergyPDF</span></code></a>, <a class="reference internal" href="skyllh.core.html#skyllh.core.pdf.IsBackgroundPDF" title="skyllh.core.pdf.IsBackgroundPDF"><code class="xref py py-class docutils literal notranslate"><span class="pre">IsBackgroundPDF</span></code></a>, <a class="reference internal" href="skyllh.core.html#skyllh.core.binning.UsesBinning" title="skyllh.core.binning.UsesBinning"><code class="xref py py-class docutils literal notranslate"><span class="pre">UsesBinning</span></code></a></p>
<p>This class provides a background energy PDF constructed from the public
data and a monte-carlo background flux model.</p>
<p>Constructs a new background energy PDF with the given PDF data and
binning.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pdf_log10emu_sindecmu</strong> (<em>2D numpy ndarray</em>) – The (n_log10emu, n_sindecmu)-shaped 2D numpy ndarray holding the
PDF values in unit 1/log10(E_mu/GeV).
A copy of this data will be created and held within this class
instance.</p></li>
<li><p><strong>log10emu_binning</strong> (<a class="reference internal" href="skyllh.core.html#skyllh.core.binning.BinningDefinition" title="skyllh.core.binning.BinningDefinition"><em>BinningDefinition</em></a>) – The binning definition for the binning in log10(E_mu/GeV).</p></li>
<li><p><strong>sindecmu_binning</strong> (<a class="reference internal" href="skyllh.core.html#skyllh.core.binning.BinningDefinition" title="skyllh.core.binning.BinningDefinition"><em>BinningDefinition</em></a>) – The binning definition for the binning in sin(dec_mu).</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.backgroundpdf.PDMCBackgroundI3EnergyPDF.__annotations__">
<span class="sig-name descname"><span class="pre">__annotations__</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{}</span></em><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.backgroundpdf.PDMCBackgroundI3EnergyPDF.__annotations__" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.backgroundpdf.PDMCBackgroundI3EnergyPDF.__firstlineno__">
<span class="sig-name descname"><span class="pre">__firstlineno__</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">312</span></em><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.backgroundpdf.PDMCBackgroundI3EnergyPDF.__firstlineno__" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.backgroundpdf.PDMCBackgroundI3EnergyPDF.__static_attributes__">
<span class="sig-name descname"><span class="pre">__static_attributes__</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">('_hist_logE_sinDec',)</span></em><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.backgroundpdf.PDMCBackgroundI3EnergyPDF.__static_attributes__" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.backgroundpdf.PDMCBackgroundI3EnergyPDF.assert_is_valid_for_trial_data">
<span class="sig-name descname"><span class="pre">assert_is_valid_for_trial_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tdm</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.backgroundpdf.PDMCBackgroundI3EnergyPDF.assert_is_valid_for_trial_data" title="Link to this definition"></a></dt>
<dd><p>Checks if this PDF covers the entire value range of the trail
data events.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>tdm</strong> (<em>TrialDataManager instance</em>) – <p>The TrialDataManager instance holding the data events.
The following data fields need to exist:</p>
<blockquote>
<div><p>’sin_dec’</p>
<p>’log_energy’</p>
</div></blockquote>
</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If parts of the trial data is outside the value range of this
    PDF.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.backgroundpdf.PDMCBackgroundI3EnergyPDF.get_prob">
<span class="sig-name descname"><span class="pre">get_prob</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tdm</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tl</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.backgroundpdf.PDMCBackgroundI3EnergyPDF.get_prob" title="Link to this definition"></a></dt>
<dd><p>Gets the probability density for the given trial data events.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tdm</strong> (<em>TrialDataManager instance</em>) – <p>The TrialDataManager instance holding the data events.
The following data fields need to exist:</p>
<blockquote>
<div><p>’sin_dec’</p>
<p>’log_energy’</p>
</div></blockquote>
</p></li>
<li><p><strong>params</strong> (<em>dict</em><em> | </em><em>None</em>) – The dictionary containing the parameter names and values for which
the probability should get calculated.
By definition of this PDF, this is <code class="docutils literal notranslate"><span class="pre">Ǹone</span></code>, because this PDF does
not depend on any parameters.</p></li>
<li><p><strong>tl</strong> (<em>TimeLord instance</em><em> | </em><em>None</em>) – The optional TimeLord instance that should be used to measure
timing information.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>prob</strong> (<em>(N_events,)-shaped numpy ndarray</em>) – The 1D numpy ndarray with the probability density for each event.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-skyllh.analyses.i3.publicdata_ps.bkg_flux">
<span id="skyllh-analyses-i3-publicdata-ps-bkg-flux-module"></span><h2>skyllh.analyses.i3.publicdata_ps.bkg_flux module<a class="headerlink" href="#module-skyllh.analyses.i3.publicdata_ps.bkg_flux" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.bkg_flux.get_dOmega">
<span class="sig-prename descclassname"><span class="pre">skyllh.analyses.i3.publicdata_ps.bkg_flux.</span></span><span class="sig-name descname"><span class="pre">get_dOmega</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dec_min</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dec_max</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.bkg_flux.get_dOmega" title="Link to this definition"></a></dt>
<dd><p>Calculates the solid angle given two declination angles.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dec_min</strong> (<em>float</em><em> | </em><em>array</em><em> of </em><em>float</em>) – The smaller declination angle.</p></li>
<li><p><strong>dec_max</strong> (<em>float</em><em> | </em><em>array</em><em> of </em><em>float</em>) – The larger declination angle.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>solidangle</strong> (<em>float | array of float</em>) – The solid angle corresponding to the two given declination angles.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.bkg_flux.southpole_zen2dec">
<span class="sig-prename descclassname"><span class="pre">skyllh.analyses.i3.publicdata_ps.bkg_flux.</span></span><span class="sig-name descname"><span class="pre">southpole_zen2dec</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">zen</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.bkg_flux.southpole_zen2dec" title="Link to this definition"></a></dt>
<dd><p>Converts zenith angles at the South Pole to declination angles.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>zen</strong> (<em>(</em><em>n</em><em>,</em><em>)</em><em>-shaped 1d numpy ndarray</em>) – The numpy ndarray holding the zenith angle values in radians.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>dec</strong> (<em>(n,)-shaped 1d numpy ndarray</em>) – The numpy ndarray holding the declination angle values in radians.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.bkg_flux.get_flux_atmo_decnu_log10enu">
<span class="sig-prename descclassname"><span class="pre">skyllh.analyses.i3.publicdata_ps.bkg_flux.</span></span><span class="sig-name descname"><span class="pre">get_flux_atmo_decnu_log10enu</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">flux_pathfilename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log10_enu_max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">9</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.bkg_flux.get_flux_atmo_decnu_log10enu" title="Link to this definition"></a></dt>
<dd><p>Constructs the atmospheric flux map function
f_atmo(log10(E_nu/GeV),dec_nu) in unit 1/(GeV cm^2 sr s).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>flux_pathfilename</strong> (<em>str</em>) – The pathfilename of the file containing the MCEq fluxes.</p></li>
<li><p><strong>log10_enu_max</strong> (<em>float</em>) – The log10(E/GeV) value of the maximum neutrino energy to be considered.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>flux_atmo</strong> (<em>(n_dec, n_e_grid)-shaped 2D numpy ndarray</em>) – The numpy ndarray holding the the atmospheric neutrino flux function in
unit 1/(GeV cm^2 sr s).</p></li>
<li><p><strong>decnu_binedges</strong> (<em>(n_decnu+1,)-shaped 1D numpy ndarray</em>) – The numpy ndarray holding the dec_nu bin edges.</p></li>
<li><p><strong>log10_enu_binedges</strong> (<em>(n_enu+1,)-shaped 1D numpy ndarray</em>) – The numpy ndarray holding the neutrino energy bin edges in log10.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.bkg_flux.get_flux_astro_decnu_log10enu">
<span class="sig-prename descclassname"><span class="pre">skyllh.analyses.i3.publicdata_ps.bkg_flux.</span></span><span class="sig-name descname"><span class="pre">get_flux_astro_decnu_log10enu</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">decnu_binedges</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log10_enu_binedges</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.bkg_flux.get_flux_astro_decnu_log10enu" title="Link to this definition"></a></dt>
<dd><p>Constructs the astrophysical neutrino flux function
f_astro(log10(E_nu/GeV),dec_nu) in unit 1/(GeV cm^2 sr s).</p>
<p>It uses the best fit from the IceCube publication [1].</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>decnu_binedges</strong> (<em>(</em><em>n_decnu+1</em><em>,</em><em>)</em><em>-shaped 1D numpy ndarray</em>) – The numpy ndarray holding the dec_nu bin edges.</p></li>
<li><p><strong>log10_enu_binedges</strong> (<em>(</em><em>n_enu+1</em><em>,</em><em>)</em><em>-shaped 1D numpy ndarray</em>) – The numpy ndarray holding the log10 values of the neutrino energy bin
edges in GeV.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>f_astro</strong> (<em>(n_decnu, n_log10enu)-shaped 2D numpy ndarray</em>) – The numpy ndarray holding the astrophysical flux values in unit
1/(GeV cm^2 sr s).</p>
</dd>
</dl>
<p class="rubric">References</p>
<p>[1] <a class="reference external" href="https://arxiv.org/pdf/2111.10299.pdf">https://arxiv.org/pdf/2111.10299.pdf</a></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.bkg_flux.convert_flux_bkg_to_pdf_bkg">
<span class="sig-prename descclassname"><span class="pre">skyllh.analyses.i3.publicdata_ps.bkg_flux.</span></span><span class="sig-name descname"><span class="pre">convert_flux_bkg_to_pdf_bkg</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f_bkg</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">decnu_binedges</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log10_enu_binedges</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.bkg_flux.convert_flux_bkg_to_pdf_bkg" title="Link to this definition"></a></dt>
<dd><p>Converts the given background flux function f_bkg into a background flux
PDF in unit 1/(log10(E/GeV) rad).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>f_bkg</strong> (<em>(</em><em>n_decnu</em><em>, </em><em>n_enu</em><em>)</em><em>-shaped 2D numpy ndarray</em>) – The numpy ndarray holding the background flux values in unit
1/(GeV cm^2 s sr).</p></li>
<li><p><strong>decnu_binedges</strong> (<em>(</em><em>n_decnu+1</em><em>,</em><em>)</em><em>-shaped 1D numpy ndarray</em>) – The numpy ndarray holding the dec_nu bin edges in radians.</p></li>
<li><p><strong>log10_enu_binedges</strong> (<em>(</em><em>n_enu+1</em><em>,</em><em>)</em><em>-shaped 1D numpy ndarray</em>) – The numpy ndarray holding the log10 values of the neutrino energy bin
edges in GeV.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>p_bkg</strong> (<em>(n_decnu, n_enu)-shaped 2D numpy ndarray</em>) – The numpy ndarray holding the background flux pdf values.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.bkg_flux.get_pd_atmo_decnu_Enu">
<span class="sig-prename descclassname"><span class="pre">skyllh.analyses.i3.publicdata_ps.bkg_flux.</span></span><span class="sig-name descname"><span class="pre">get_pd_atmo_decnu_Enu</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">flux_pathfilename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log10_true_e_max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">9</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.bkg_flux.get_pd_atmo_decnu_Enu" title="Link to this definition"></a></dt>
<dd><p>Constructs the atmospheric neutrino PDF p_atmo(E_nu,dec_nu) in unit
1/(GeV rad).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>flux_pathfilename</strong> (<em>str</em>) – The pathfilename of the file containing the MCEq flux.</p></li>
<li><p><strong>log10_true_e_max</strong> (<em>float</em>) – The log10(E/GeV) value of the maximum true energy to be considered.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>pd_atmo</strong> (<em>(n_dec, n_e_grid)-shaped 2D numpy ndarray</em>) – The numpy ndarray holding the the atmospheric neutrino PDF in unit
1/(GeV rad).</p></li>
<li><p><strong>decnu_binedges</strong> (<em>(n_decnu+1,)-shaped 1D numpy ndarray</em>) – The numpy ndarray holding the dec_nu bin edges.</p></li>
<li><p><strong>log10_e_grid_edges</strong> (<em>(n_e_grid+1,)-shaped 1D numpy ndarray</em>) – The numpy ndarray holding the energy bin edges in log10.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.bkg_flux.get_pd_atmo_E_nu_sin_dec_nu">
<span class="sig-prename descclassname"><span class="pre">skyllh.analyses.i3.publicdata_ps.bkg_flux.</span></span><span class="sig-name descname"><span class="pre">get_pd_atmo_E_nu_sin_dec_nu</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">flux_pathfilename</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.bkg_flux.get_pd_atmo_E_nu_sin_dec_nu" title="Link to this definition"></a></dt>
<dd><p>Constructs the atmospheric energy PDF p_atmo(E_nu|sin(dec_nu)) in
unit 1/GeV.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>flux_pathfilename</strong> (<em>str</em>) – The pathfilename of the file containing the MCEq flux.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>pd_atmo</strong> (<em>(n_sin_dec, n_e_grid)-shaped 2D numpy ndarray</em>) – The numpy ndarray holding the the atmospheric energy PDF in unit 1/GeV.</p></li>
<li><p><strong>sin_dec_binedges</strong> (<em>numpy ndarray</em>) – The (n_sin_dec+1,)-shaped 1D numpy ndarray holding the sin(dec) bin
edges.</p></li>
<li><p><strong>log10_e_grid_edges</strong> (<em>numpy ndarray</em>) – The (n_e_grid+1,)-shaped 1D numpy ndarray holding the energy bin edges
in log10.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.bkg_flux.get_pd_astro_E_nu_sin_dec_nu">
<span class="sig-prename descclassname"><span class="pre">skyllh.analyses.i3.publicdata_ps.bkg_flux.</span></span><span class="sig-name descname"><span class="pre">get_pd_astro_E_nu_sin_dec_nu</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sin_dec_binedges</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log10_e_grid_edges</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.bkg_flux.get_pd_astro_E_nu_sin_dec_nu" title="Link to this definition"></a></dt>
<dd><p>Constructs the astrophysical energy PDF p_astro(E_nu|sin(dec_nu)) in
unit 1/GeV.
It uses the best fit from the IceCube publication [1].</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sin_dec_binedges</strong> (<em>(</em><em>n_sin_dec+1</em><em>,</em><em>)</em><em>-shaped 1D numpy ndarray</em>) – The numpy ndarray holding the sin(dec) bin edges.</p></li>
<li><p><strong>log10_e_grid_edges</strong> (<em>(</em><em>n_e_grid+1</em><em>,</em><em>)</em><em>-shaped 1D numpy ndarray</em>) – The numpy ndarray holding the log10 values of the energy bin edges in
GeV of the energy grid.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>pd_astro</strong> (<em>(n_sin_dec, n_e_grid)-shaped 2D numpy ndarray</em>) – The numpy ndarray holding the energy probability density values
p(E_nu|sin_dec_nu) in unit 1/GeV.</p>
</dd>
</dl>
<p class="rubric">References</p>
<p>[1] <a class="reference external" href="https://arxiv.org/pdf/2111.10299.pdf">https://arxiv.org/pdf/2111.10299.pdf</a></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.bkg_flux.get_pd_bkg_E_nu_sin_dec_nu">
<span class="sig-prename descclassname"><span class="pre">skyllh.analyses.i3.publicdata_ps.bkg_flux.</span></span><span class="sig-name descname"><span class="pre">get_pd_bkg_E_nu_sin_dec_nu</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pd_atmo</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pd_astro</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log10_e_grid_edges</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.bkg_flux.get_pd_bkg_E_nu_sin_dec_nu" title="Link to this definition"></a></dt>
<dd><p>Constructs the total background flux probability density
p_bkg(E_nu|sin(dec_nu)) in unit 1/GeV.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pd_atmo</strong> (<em>(</em><em>n_sin_dec</em><em>, </em><em>n_e_grid</em><em>)</em><em>-shaped 2D numpy ndarray</em>) – The numpy ndarray holding the probability density values
p(E_nu|sin(dec_nu)) in 1/GeV of the atmospheric flux.</p></li>
<li><p><strong>pd_astro</strong> (<em>(</em><em>n_sin_dec</em><em>, </em><em>n_e_grid</em><em>)</em><em>-shaped 2D numpy ndarray</em>) – The numpy ndarray holding the probability density values
p(E_nu|sin(dec_nu)) in 1/GeV of the astrophysical flux.</p></li>
<li><p><strong>log10_e_grid_edges</strong> (<em>(</em><em>n_e_grid+1</em><em>,</em><em>)</em><em>-shaped numpy ndarray</em>) – The numpy ndarray holding the log10 values of the energy grid bin edges
in GeV.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>pd_bkg</strong> (<em>(n_sin_dec, n_e_grid)-shaped 2D numpy ndarray</em>) – The numpy ndarray holding total background probability density values
p_bkg(E_nu|sin(dec_nu)) in unit 1/GeV.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-skyllh.analyses.i3.publicdata_ps.detsigyield">
<span id="skyllh-analyses-i3-publicdata-ps-detsigyield-module"></span><h2>skyllh.analyses.i3.publicdata_ps.detsigyield module<a class="headerlink" href="#module-skyllh.analyses.i3.publicdata_ps.detsigyield" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.detsigyield.PublicDataPowerLawFluxPointLikeSourceI3DetSigYieldImplMethod">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">skyllh.analyses.i3.publicdata_ps.detsigyield.</span></span><span class="sig-name descname"><span class="pre">PublicDataPowerLawFluxPointLikeSourceI3DetSigYieldImplMethod</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">gamma_grid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spline_order_sinDec</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spline_order_gamma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ncpu</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.detsigyield.PublicDataPowerLawFluxPointLikeSourceI3DetSigYieldImplMethod" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="skyllh.i3.html#skyllh.i3.detsigyield.PowerLawFluxPointLikeSourceI3DetSigYieldImplMethod" title="skyllh.i3.detsigyield.PowerLawFluxPointLikeSourceI3DetSigYieldImplMethod"><code class="xref py py-class docutils literal notranslate"><span class="pre">PowerLawFluxPointLikeSourceI3DetSigYieldImplMethod</span></code></a>, <a class="reference internal" href="skyllh.core.html#skyllh.core.multiproc.IsParallelizable" title="skyllh.core.multiproc.IsParallelizable"><code class="xref py py-class docutils literal notranslate"><span class="pre">IsParallelizable</span></code></a></p>
<p>This detector signal yield constructor class constructs a
detector signal yield instance for a variable power law flux model, which
has the spectral index gamma as fit parameter, assuming a point-like source.
It constructs a two-dimensional spline function in sin(dec) and gamma, using
a <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.RectBivariateSpline.html#scipy.interpolate.RectBivariateSpline" title="(in SciPy v1.16.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">scipy.interpolate.RectBivariateSpline</span></code></a>. Hence, the detector signal
yield can vary with the declination and the spectral index, gamma, of the
source.</p>
<p>This detector signal yield implementation method works with a
PowerLawFlux flux model.</p>
<p>It is tailored to the IceCube detector at the South Pole, where the
effective area depends solely on the zenith angle, and hence on the
declination, of the source.</p>
<p>It takes the effective area for the detector signal yield from the auxilary
detector effective area data file given by the public data.</p>
<p>Creates a new IceCube detector signal yield constructor instance for
a power law flux model. It requires the effective area from the public
data, and a gamma parameter grid to compute the gamma dependency of the
detector signal yield.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>gamma_grid</strong> (<em>ParameterGrid instance</em>) – The ParameterGrid instance which defines the grid of gamma values.</p></li>
<li><p><strong>spline_order_sinDec</strong> (<em>int</em>) – The order of the spline function for the logarithmic values of the
detector signal yield along the sin(dec) axis.
The default is 2.</p></li>
<li><p><strong>spline_order_gamma</strong> (<em>int</em>) – The order of the spline function for the logarithmic values of the
detector signal yield along the gamma axis.
The default is 2.</p></li>
<li><p><strong>ncpu</strong> (<em>int</em><em> | </em><em>None</em>) – The number of CPUs to utilize. Global setting will take place if
not specified, i.e. set to None.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.detsigyield.PublicDataPowerLawFluxPointLikeSourceI3DetSigYieldImplMethod.construct_detsigyield">
<span class="sig-name descname"><span class="pre">construct_detsigyield</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fluxmodel</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">livetime</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ppbar</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.detsigyield.PublicDataPowerLawFluxPointLikeSourceI3DetSigYieldImplMethod.construct_detsigyield" title="Link to this definition"></a></dt>
<dd><p>Constructs a detector signal yield 2-dimensional log spline
function for the given power law flux model with varying gamma values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dataset</strong> (<em>Dataset instance</em>) – The Dataset instance holding the sin(dec) binning definition.</p></li>
<li><p><strong>data</strong> (<em>DatasetData instance</em>) – The DatasetData instance holding the monte-carlo event data.
This implementation loads the effective area from the provided
public data and hence does not need monte-carlo data.</p></li>
<li><p><strong>fluxmodel</strong> (<a class="reference internal" href="skyllh.physics.html#skyllh.physics.flux.FluxModel" title="skyllh.physics.flux.FluxModel"><em>FluxModel</em></a>) – The flux model instance. Must be an instance of PowerLawFlux.</p></li>
<li><p><strong>livetime</strong> (<em>float</em><em> | </em><em>Livetime instance</em>) – The live-time in days or an instance of Livetime to use for the
detector signal yield.</p></li>
<li><p><strong>ppbar</strong> (<em>ProgressBar instance</em><em> | </em><em>None</em>) – The instance of ProgressBar of the optional parent progress bar.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>detsigyield</strong> (<em>PowerLawFluxPointLikeSourceI3DetSigYield instance</em>) – The DetSigYield instance for a point-like source with a power law
flux with variable gamma parameter.</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.detsigyield.PublicDataPowerLawFluxPointLikeSourceI3DetSigYieldImplMethod.__firstlineno__">
<span class="sig-name descname"><span class="pre">__firstlineno__</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">31</span></em><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.detsigyield.PublicDataPowerLawFluxPointLikeSourceI3DetSigYieldImplMethod.__firstlineno__" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.detsigyield.PublicDataPowerLawFluxPointLikeSourceI3DetSigYieldImplMethod.__static_attributes__">
<span class="sig-name descname"><span class="pre">__static_attributes__</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">()</span></em><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.detsigyield.PublicDataPowerLawFluxPointLikeSourceI3DetSigYieldImplMethod.__static_attributes__" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="module-skyllh.analyses.i3.publicdata_ps.mcbkg_ps">
<span id="skyllh-analyses-i3-publicdata-ps-mcbkg-ps-module"></span><h2>skyllh.analyses.i3.publicdata_ps.mcbkg_ps module<a class="headerlink" href="#module-skyllh.analyses.i3.publicdata_ps.mcbkg_ps" title="Link to this heading"></a></h2>
<p>The mcbkg_ps analysis is a multi-dataset time-integrated single source
analysis with a two-component likelihood function using a spacial and an energy
event PDF. It initializes the background energy pdf using auxiliary fluxes and
pdfs, which are generated by running <cite>scripts/mceq_atm_bkg.py</cite> script.</p>
<dl class="py function">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.mcbkg_ps.psi_func">
<span class="sig-prename descclassname"><span class="pre">skyllh.analyses.i3.publicdata_ps.mcbkg_ps.</span></span><span class="sig-name descname"><span class="pre">psi_func</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tdm</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_hypo_group_manager</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fitparams</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.mcbkg_ps.psi_func" title="Link to this definition"></a></dt>
<dd><p>Function to calculate the opening angle between the source position
and the event’s reconstructed position.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.mcbkg_ps.TXS_location">
<span class="sig-prename descclassname"><span class="pre">skyllh.analyses.i3.publicdata_ps.mcbkg_ps.</span></span><span class="sig-name descname"><span class="pre">TXS_location</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.mcbkg_ps.TXS_location" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.mcbkg_ps.create_analysis">
<span class="sig-prename descclassname"><span class="pre">skyllh.analyses.i3.publicdata_ps.mcbkg_ps.</span></span><span class="sig-name descname"><span class="pre">create_analysis</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rss</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">datasets</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">refplflux_Phi0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">refplflux_E0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1000.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">refplflux_gamma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ns_seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gamma_seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'.'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cap_ratio</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">compress_data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_data_fields</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">optimize_delta_angle</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">efficiency_mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tl</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ppbar</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.mcbkg_ps.create_analysis" title="Link to this definition"></a></dt>
<dd><p>Creates the Analysis instance for this particular analysis.</p>
<section id="parameters">
<h3>Parameters:<a class="headerlink" href="#parameters" title="Link to this heading"></a></h3>
<dl>
<dt>datasets<span class="classifier">list of Dataset instances</span></dt><dd><p>The list of Dataset instances, which should be used in the
analysis.</p>
</dd>
<dt>source<span class="classifier">PointLikeSource instance</span></dt><dd><p>The PointLikeSource instance defining the point source position.</p>
</dd>
<dt>refplflux_Phi0<span class="classifier">float</span></dt><dd><p>The flux normalization to use for the reference power law flux model.</p>
</dd>
<dt>refplflux_E0<span class="classifier">float</span></dt><dd><p>The reference energy to use for the reference power law flux model.</p>
</dd>
<dt>refplflux_gamma<span class="classifier">float</span></dt><dd><p>The spectral index to use for the reference power law flux model.</p>
</dd>
<dt>ns_seed<span class="classifier">float</span></dt><dd><p>Value to seed the minimizer with for the ns fit.</p>
</dd>
<dt>gamma_seed<span class="classifier">float | None</span></dt><dd><p>Value to seed the minimizer with for the gamma fit. If set to None,
the refplflux_gamma value will be set as gamma_seed.</p>
</dd>
<dt>cache_dir<span class="classifier">str</span></dt><dd><p>The cache directory where to look for cached data, e.g. signal PDFs.</p>
</dd>
<dt>compress_data<span class="classifier">bool</span></dt><dd><p>Flag if the data should get converted from float64 into float32.</p>
</dd>
<dt>keep_data_fields<span class="classifier">list of str | None</span></dt><dd><p>List of additional data field names that should get kept when loading
the data.</p>
</dd>
<dt>optimize_delta_angle<span class="classifier">float</span></dt><dd><p>The delta angle in degrees for the event selection optimization methods.</p>
</dd>
<dt>efficiency_mode<span class="classifier">str | None</span></dt><dd><p>The efficiency mode the data should get loaded with. Possible values
are:</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt>‘memory’:</dt><dd><p>The data will be load in a memory efficient way. This will
require more time, because all data records of a file will
be loaded sequentially.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>‘time’:</dt><dd><p>The data will be loaded in a time efficient way. This will
require more memory, because each data file gets loaded in
memory at once.</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<p>The default value is <code class="docutils literal notranslate"><span class="pre">'time'</span></code>. If set to <code class="docutils literal notranslate"><span class="pre">None</span></code>, the default
value will be used.</p>
</dd>
<dt>tl<span class="classifier">TimeLord instance | None</span></dt><dd><p>The TimeLord instance to use to time the creation of the analysis.</p>
</dd>
<dt>ppbar<span class="classifier">ProgressBar instance | None</span></dt><dd><p>The instance of ProgressBar for the optional parent progress bar.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>analysis</strong> (<em>SpatialEnergyTimeIntegratedMultiDatasetSingleSourceAnalysis</em>) – The Analysis instance for this analysis.</p>
</dd>
</dl>
</section>
</dd></dl>

</section>
<section id="module-skyllh.analyses.i3.publicdata_ps.pdfratio">
<span id="skyllh-analyses-i3-publicdata-ps-pdfratio-module"></span><h2>skyllh.analyses.i3.publicdata_ps.pdfratio module<a class="headerlink" href="#module-skyllh.analyses.i3.publicdata_ps.pdfratio" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.pdfratio.PDPDFRatio">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">skyllh.analyses.i3.publicdata_ps.pdfratio.</span></span><span class="sig-name descname"><span class="pre">PDPDFRatio</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sig_pdf_set</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bkg_pdf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cap_ratio</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.pdfratio.PDPDFRatio" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="skyllh.core.html#skyllh.core.pdfratio.SigSetOverBkgPDFRatio" title="skyllh.core.pdfratio.SigSetOverBkgPDFRatio"><code class="xref py py-class docutils literal notranslate"><span class="pre">SigSetOverBkgPDFRatio</span></code></a></p>
<p>Creates a PDFRatio instance for the public data.
It takes a signal PDF set for different discrete gamma values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sig_pdf_set</strong> (<em>instance</em><em> of </em><a class="reference internal" href="#skyllh.analyses.i3.publicdata_ps.signalpdf.PDSignalEnergyPDFSet" title="skyllh.analyses.i3.publicdata_ps.signalpdf.PDSignalEnergyPDFSet"><em>PDSignalEnergyPDFSet</em></a>) – The PDSignalEnergyPDFSet instance holding the set of signal energy
PDFs.</p></li>
<li><p><strong>bkg_pdf</strong> (<em>instance</em><em> of </em><a class="reference internal" href="#skyllh.analyses.i3.publicdata_ps.backgroundpdf.PDDataBackgroundI3EnergyPDF" title="skyllh.analyses.i3.publicdata_ps.backgroundpdf.PDDataBackgroundI3EnergyPDF"><em>PDDataBackgroundI3EnergyPDF</em></a>) – The PDDataBackgroundI3EnergyPDF instance holding the background
energy PDF.</p></li>
<li><p><strong>cap_ratio</strong> (<em>bool</em>) – Switch whether the S/B PDF ratio should get capped where no
background is available. Default is False.</p></li>
</ul>
</dd>
</dl>
<dl class="py property">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.pdfratio.PDPDFRatio.cap_ratio">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">cap_ratio</span></span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.pdfratio.PDPDFRatio.cap_ratio" title="Link to this definition"></a></dt>
<dd><p>Boolean switch whether to cap the ratio where no background
information is available (True) or use the smallest possible floating
point number greater than zero as background pdf value (False).</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.pdfratio.PDPDFRatio.__firstlineno__">
<span class="sig-name descname"><span class="pre">__firstlineno__</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">14</span></em><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.pdfratio.PDPDFRatio.__firstlineno__" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.pdfratio.PDPDFRatio.__static_attributes__">
<span class="sig-name descname"><span class="pre">__static_attributes__</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">('_cache_fitparams_hash',</span> <span class="pre">'_cache_gradients',</span> <span class="pre">'_cache_ratio',</span> <span class="pre">'_cap_ratio',</span> <span class="pre">'_interpolmethod_instance',</span> <span class="pre">'_logger',</span> <span class="pre">'cap_ratio',</span> <span class="pre">'ratio_fill_value_dict')</span></em><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.pdfratio.PDPDFRatio.__static_attributes__" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.pdfratio.PDPDFRatio.get_ratio">
<span class="sig-name descname"><span class="pre">get_ratio</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tdm</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fitparams</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tl</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.pdfratio.PDPDFRatio.get_ratio" title="Link to this definition"></a></dt>
<dd><p>Calculates the PDF ratio values for all the events.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tdm</strong> (<em>instance</em><em> of </em><a class="reference internal" href="skyllh.core.html#skyllh.core.trialdata.TrialDataManager" title="skyllh.core.trialdata.TrialDataManager"><em>TrialDataManager</em></a>) – The TrialDataManager instance holding the trial data events for
which the PDF ratio values should get calculated.</p></li>
<li><p><strong>fitparams</strong> (<em>dict</em><em> | </em><em>None</em>) – The dictionary with the parameter name-value pairs.
It can be <code class="docutils literal notranslate"><span class="pre">None</span></code>, if the PDF ratio does not depend on any
parameters.</p></li>
<li><p><strong>tl</strong> (<em>TimeLord instance</em><em> | </em><em>None</em>) – The optional TimeLord instance that should be used to measure
timing information.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ratios</strong> (<em>(N_events,)-shaped 1d numpy ndarray of float</em>) – The PDF ratio value for each trial event.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.pdfratio.PDPDFRatio.get_gradient">
<span class="sig-name descname"><span class="pre">get_gradient</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tdm</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fitparams</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fitparam_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.pdfratio.PDPDFRatio.get_gradient" title="Link to this definition"></a></dt>
<dd><p>Retrieves the PDF ratio gradient for the pidx’th fit parameter.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tdm</strong> (<em>instance</em><em> of </em><a class="reference internal" href="skyllh.core.html#skyllh.core.trialdata.TrialDataManager" title="skyllh.core.trialdata.TrialDataManager"><em>TrialDataManager</em></a>) – The TrialDataManager instance holding the trial event data for which
the PDF ratio gradient values should get calculated.</p></li>
<li><p><strong>fitparams</strong> (<em>dict</em>) – The dictionary with the fit parameter values.</p></li>
<li><p><strong>fitparam_name</strong> (<em>str</em>) – The name of the fit parameter for which the gradient should get
calculated.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-skyllh.analyses.i3.publicdata_ps.signal_generator">
<span id="skyllh-analyses-i3-publicdata-ps-signal-generator-module"></span><h2>skyllh.analyses.i3.publicdata_ps.signal_generator module<a class="headerlink" href="#module-skyllh.analyses.i3.publicdata_ps.signal_generator" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.signal_generator.PDDatasetSignalGenerator">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">skyllh.analyses.i3.publicdata_ps.signal_generator.</span></span><span class="sig-name descname"><span class="pre">PDDatasetSignalGenerator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_dec</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">effA</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sm</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.signal_generator.PDDatasetSignalGenerator" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This class provides a signal generation method for a point-like source
seen in the IceCube detector using one dataset of the 10 years public data
release. It is used by the PDSignalGenerator class in a loop over all the
datasets that have been added to the analysis.</p>
<p>Creates a new instance of the signal generator for generating
signal events from a specific public data dataset.</p>
<section id="id1">
<h3>Parameters:<a class="headerlink" href="#id1" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>ds<span class="classifier">Dataset instance</span></dt><dd><p>Dataset instance for which signal events should get
generated for.</p>
</dd>
<dt>src_dec<span class="classifier">float</span></dt><dd><p>The declination of the source in radians.</p>
</dd>
<dt>effA<span class="classifier">PDAeff | None</span></dt><dd><p>Representation of the effective area provided by the public data.</p>
</dd>
<dt>sm<span class="classifier">PDSmearingMatrix | None</span></dt><dd><p>Representation of the smearing matrix provided by the public data.</p>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.signal_generator.PDDatasetSignalGenerator.energy_filter">
<span class="sig-name descname"><span class="pre">energy_filter</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;numpy.vectorize</span> <span class="pre">object&gt;</span></em><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.signal_generator.PDDatasetSignalGenerator.energy_filter" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.signal_generator.PDDatasetSignalGenerator.generate_signal_events">
<span class="sig-name descname"><span class="pre">generate_signal_events</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rss</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_dec</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_ra</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flux_model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_events</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">energy_cut_spline</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cut_sindec</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.signal_generator.PDDatasetSignalGenerator.generate_signal_events" title="Link to this definition"></a></dt>
<dd><p>Generates <code class="docutils literal notranslate"><span class="pre">n_events</span></code> signal events for the given source location
and flux model.</p>
<section id="paramters">
<h4>Paramters<a class="headerlink" href="#paramters" title="Link to this heading"></a></h4>
<p>rss : RandomStateService
src_dec : float</p>
<blockquote>
<div><p>Declination coordinate of the injection point.</p>
</div></blockquote>
<dl class="simple">
<dt>src_ra<span class="classifier">float</span></dt><dd><p>Right ascension coordinate of the injection point.</p>
</dd>
<dt>flux_model<span class="classifier">FluxModel</span></dt><dd><p>Instance of the <cite>FluxModel</cite> class.</p>
</dd>
<dt>n_events<span class="classifier">int</span></dt><dd><p>Number of signal events to be generated.</p>
</dd>
<dt>energy_cut_splines<span class="classifier">scipy.interpolate.UnivariateSpline</span></dt><dd><p>A spline of E(sin_dec) that defines the declination
dependent energy cut in the IceCube southern sky.</p>
</dd>
<dt>cut_sindec<span class="classifier">float</span></dt><dd><p>The sine of the declination to start applying the energy cut.
The cut will be applied from this declination down.</p>
</dd>
</dl>
<dl class="field-list">
<dt class="field-odd">returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>events</strong> (<em>numpy record array</em>) – The numpy record array holding the event data.
It contains the following data fields:</p>
<blockquote>
<div><ul class="simple">
<li><p>‘isvalid’</p></li>
<li><p>‘log_true_energy’</p></li>
<li><p>‘log_energy’</p></li>
<li><p>‘dec’</p></li>
<li><p>‘ra’</p></li>
<li><p>‘ang_err’</p></li>
</ul>
</div></blockquote>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.signal_generator.PDDatasetSignalGenerator.__firstlineno__">
<span class="sig-name descname"><span class="pre">__firstlineno__</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">27</span></em><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.signal_generator.PDDatasetSignalGenerator.__firstlineno__" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.signal_generator.PDDatasetSignalGenerator.__static_attributes__">
<span class="sig-name descname"><span class="pre">__static_attributes__</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">('_logger',</span> <span class="pre">'effA',</span> <span class="pre">'smearing_matrix')</span></em><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.signal_generator.PDDatasetSignalGenerator.__static_attributes__" title="Link to this definition"></a></dt>
<dd></dd></dl>

</section>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.signal_generator.PDSignalGenerator">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">skyllh.analyses.i3.publicdata_ps.signal_generator.</span></span><span class="sig-name descname"><span class="pre">PDSignalGenerator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">src_hypo_group_manager</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_list</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">llhratio</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">energy_cut_splines</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cut_sindec</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.signal_generator.PDSignalGenerator" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="skyllh.core.html#skyllh.core.signal_generator.SignalGeneratorBase" title="skyllh.core.signal_generator.SignalGeneratorBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">SignalGeneratorBase</span></code></a></p>
<p>This class provides a signal generation method for a point-like source
seen in the IceCube detector using the 10 years public data release.</p>
<p>Constructs a new signal generator instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>src_hypo_group_manager</strong> (<em>SourceHypoGroupManager instance</em>) – The SourceHypoGroupManager instance defining the source hypothesis
groups.</p></li>
<li><p><strong>dataset_list</strong> (<em>list</em><em> of </em><em>Dataset instances</em>) – The list of Dataset instances for which signal events should get
generated for.</p></li>
<li><p><strong>data_list</strong> (<em>list</em><em> of </em><em>DatasetData instances</em>) – The list of DatasetData instances holding the actual data of each
dataset. The order must match the order of <code class="docutils literal notranslate"><span class="pre">dataset_list</span></code>.</p></li>
<li><p><strong>llhratio</strong> (<a class="reference internal" href="skyllh.core.html#skyllh.core.llhratio.LLHRatio" title="skyllh.core.llhratio.LLHRatio"><em>LLHRatio</em></a>) – The likelihood ratio object contains the datasets signal weights
needed for distributing the event generation among the different
datasets.</p></li>
<li><p><strong>energy_cut_splines</strong> (<em>list</em><em> of </em><em>UnivariateSpline</em>) – A list of splines of E(sin_dec) used to define the declination
dependent energy cut in the IceCube southern sky.</p></li>
<li><p><strong>cut_sindec</strong> (<em>list</em><em> of </em><em>float</em>) – The sine of the declination to start applying the energy cut.
The cut will be applied from this declination down.</p></li>
</ul>
</dd>
</dl>
<dl class="py property">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.signal_generator.PDSignalGenerator.src_hypo_group_manager">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">src_hypo_group_manager</span></span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.signal_generator.PDSignalGenerator.src_hypo_group_manager" title="Link to this definition"></a></dt>
<dd><p>The SourceHypoGroupManager instance defining the source groups with
their spectra.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.signal_generator.PDSignalGenerator.dataset_list">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">dataset_list</span></span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.signal_generator.PDSignalGenerator.dataset_list" title="Link to this definition"></a></dt>
<dd><p>The list of Dataset instances for which signal events should get
generated for.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.signal_generator.PDSignalGenerator.llhratio">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">llhratio</span></span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.signal_generator.PDSignalGenerator.llhratio" title="Link to this definition"></a></dt>
<dd><p>The log-likelihood ratio function for the analysis.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.signal_generator.PDSignalGenerator.generate_signal_events">
<span class="sig-name descname"><span class="pre">generate_signal_events</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rss</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mean</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">poisson</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.signal_generator.PDSignalGenerator.generate_signal_events" title="Link to this definition"></a></dt>
<dd><p>This abstract method must be implemented by the derived class to
generate a given number of signal events.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>rss</strong> (<em>instance</em><em> of </em><a class="reference internal" href="skyllh.core.html#skyllh.core.random.RandomStateService" title="skyllh.core.random.RandomStateService"><em>RandomStateService</em></a>) – The instance of RandomStateService providing the random number
generator state.</p></li>
<li><p><strong>mean</strong> (<em>float</em>) – The mean number of signal events. If the <code class="docutils literal notranslate"><span class="pre">poisson</span></code> argument is set
to True, the actual number of generated signal events will be drawn
from a Poisson distribution with this given mean value of signal
events.</p></li>
<li><p><strong>poisson</strong> (<em>bool</em>) – If set to True, the actual number of generated signal events will
be drawn from a Poisson distribution with the given mean value of
signal events.
If set to False, the argument <code class="docutils literal notranslate"><span class="pre">mean</span></code> specifies the actual number
of generated signal events.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>n_signal</strong> (<em>int</em>) – The number of generated signal events.</p></li>
<li><p><strong>signal_events_dict</strong> (<em>dict of DataFieldRecordArray</em>) – The dictionary holding the DataFieldRecordArray instancs with the
generated signal events. Each key of this dictionary represents the
dataset index for which the signal events have been generated.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.signal_generator.PDSignalGenerator.__firstlineno__">
<span class="sig-name descname"><span class="pre">__firstlineno__</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">348</span></em><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.signal_generator.PDSignalGenerator.__firstlineno__" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.signal_generator.PDSignalGenerator.__static_attributes__">
<span class="sig-name descname"><span class="pre">__static_attributes__</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">('_dataset_list',</span> <span class="pre">'_llhratio',</span> <span class="pre">'_src_hypo_group_manager',</span> <span class="pre">'cut_sindec',</span> <span class="pre">'data_list',</span> <span class="pre">'dataset_list',</span> <span class="pre">'effA',</span> <span class="pre">'llhratio',</span> <span class="pre">'sm',</span> <span class="pre">'splines',</span> <span class="pre">'src_hypo_group_manager')</span></em><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.signal_generator.PDSignalGenerator.__static_attributes__" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.signal_generator.PDTimeDependentSignalGenerator">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">skyllh.analyses.i3.publicdata_ps.signal_generator.</span></span><span class="sig-name descname"><span class="pre">PDTimeDependentSignalGenerator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">src_hypo_group_manager</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_list</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">llhratio</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">energy_cut_splines</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cut_sindec</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gauss</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">box</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.signal_generator.PDTimeDependentSignalGenerator" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#skyllh.analyses.i3.publicdata_ps.signal_generator.PDSignalGenerator" title="skyllh.analyses.i3.publicdata_ps.signal_generator.PDSignalGenerator"><code class="xref py py-class docutils literal notranslate"><span class="pre">PDSignalGenerator</span></code></a></p>
<p>The time dependent signal generator works so far only for one single
dataset. For multi datasets one needs to adjust the dataset weights
accordingly (scaling of the effective area with livetime of the flare in
the dataset).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>src_hypo_group_manager</strong> (<em>SourceHypoGroupManager instance</em>) – The instance of SourceHypoGroupManager that defines the list of
sources, i.e. the list of SourceModel instances.</p></li>
<li><p><strong>dataset_list</strong> (<em>list</em><em> of </em><em>Dataset instances</em>) – The list of Dataset instances for which signal events should get
generated for.</p></li>
<li><p><strong>data_list</strong> (<em>list</em><em> of </em><em>DatasetData instances</em>) – The list of DatasetData instances holding the actual data of each
dataset. The order must match the order of <code class="docutils literal notranslate"><span class="pre">dataset_list</span></code>.</p></li>
<li><p><strong>llhratio</strong> (<a class="reference internal" href="skyllh.core.html#skyllh.core.llhratio.LLHRatio" title="skyllh.core.llhratio.LLHRatio"><em>LLHRatio</em></a>) – The likelihood ratio object contains the datasets signal weights
needed for distributing the event generation among the different
datsets.</p></li>
<li><p><strong>energy_cut_splines</strong> (<em>list</em><em> of </em><em>UnivariateSpline</em>)</p></li>
<li><p><strong>cut_sindec</strong> (<em>float</em>)</p></li>
<li><p><strong>gauss</strong> (<em>dict</em><em> | </em><em>None</em>) – None or dictionary with {“mu”: float, “sigma”: float}.</p></li>
<li><p><strong>box</strong> (<em>dict</em><em> | </em><em>None</em>) – None or dictionary with {“start”: float, “end”: float}.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.signal_generator.PDTimeDependentSignalGenerator.__annotations__">
<span class="sig-name descname"><span class="pre">__annotations__</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{}</span></em><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.signal_generator.PDTimeDependentSignalGenerator.__annotations__" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.signal_generator.PDTimeDependentSignalGenerator.__firstlineno__">
<span class="sig-name descname"><span class="pre">__firstlineno__</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">500</span></em><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.signal_generator.PDTimeDependentSignalGenerator.__firstlineno__" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.signal_generator.PDTimeDependentSignalGenerator.__static_attributes__">
<span class="sig-name descname"><span class="pre">__static_attributes__</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">('box',</span> <span class="pre">'gauss',</span> <span class="pre">'time_pdf')</span></em><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.signal_generator.PDTimeDependentSignalGenerator.__static_attributes__" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.signal_generator.PDTimeDependentSignalGenerator.set_flare">
<span class="sig-name descname"><span class="pre">set_flare</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">gauss</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">box</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.signal_generator.PDTimeDependentSignalGenerator.set_flare" title="Link to this definition"></a></dt>
<dd><p>Set the neutrino flare given parameters.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>gauss</strong> (<em>dict</em><em> | </em><em>None</em>) – None or dictionary with {“mu”: float, “sigma”: float}.</p></li>
<li><p><strong>box</strong> (<em>dict</em><em> | </em><em>None</em>) – None or dictionary with {“start”: float, “end”: float}.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.signal_generator.PDTimeDependentSignalGenerator.is_in_grl">
<span class="sig-name descname"><span class="pre">is_in_grl</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grl</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.signal_generator.PDTimeDependentSignalGenerator.is_in_grl" title="Link to this definition"></a></dt>
<dd><p>Helper function to check if given times are in the grl ontime.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>time</strong> (<em>1d ndarray</em>) – Time values.</p></li>
<li><p><strong>grl</strong> (<em>ndarray</em>) – Array of the detector good run list.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>is_in_grl</strong> (<em>1d ndarray</em>) – Boolean mask of <cite>time</cite> in grl ontime.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.signal_generator.PDTimeDependentSignalGenerator.generate_signal_events">
<span class="sig-name descname"><span class="pre">generate_signal_events</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rss</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mean</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">poisson</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.signal_generator.PDTimeDependentSignalGenerator.generate_signal_events" title="Link to this definition"></a></dt>
<dd><p>Same as in PDSignalGenerator, but we assign times here.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-skyllh.analyses.i3.publicdata_ps.signalpdf">
<span id="skyllh-analyses-i3-publicdata-ps-signalpdf-module"></span><h2>skyllh.analyses.i3.publicdata_ps.signalpdf module<a class="headerlink" href="#module-skyllh.analyses.i3.publicdata_ps.signalpdf" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.signalpdf.PDSignalEnergyPDF">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">skyllh.analyses.i3.publicdata_ps.signalpdf.</span></span><span class="sig-name descname"><span class="pre">PDSignalEnergyPDF</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f_e_spl</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.signalpdf.PDSignalEnergyPDF" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="skyllh.core.html#skyllh.core.pdf.PDF" title="skyllh.core.pdf.PDF"><code class="xref py py-class docutils literal notranslate"><span class="pre">PDF</span></code></a>, <a class="reference internal" href="skyllh.core.html#skyllh.core.pdf.IsSignalPDF" title="skyllh.core.pdf.IsSignalPDF"><code class="xref py py-class docutils literal notranslate"><span class="pre">IsSignalPDF</span></code></a></p>
<p>This class provides a signal energy PDF for a spectrial index value.</p>
<p>Creates a new signal energy PDF instance for a particular spectral
index value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>f_e_spl</strong> (<em>FctSpline1D instance</em>) – The FctSpline1D instance representing the spline of the energy PDF.</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.signalpdf.PDSignalEnergyPDF.assert_is_valid_for_trial_data">
<span class="sig-name descname"><span class="pre">assert_is_valid_for_trial_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tdm</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.signalpdf.PDSignalEnergyPDF.assert_is_valid_for_trial_data" title="Link to this definition"></a></dt>
<dd><p>This method is supposed to check if this PDF is valid for
all the given trial data. This means, it needs to check if there
is a PDF value for each trial data event that will be used in the
likelihood evaluation. This is just a seatbelt.
The method must raise a ValueError if the PDF is not valid for the
given trial data.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.signalpdf.PDSignalEnergyPDF.get_pd_by_log10_reco_e">
<span class="sig-name descname"><span class="pre">get_pd_by_log10_reco_e</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">log10_reco_e</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tl</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.signalpdf.PDSignalEnergyPDF.get_pd_by_log10_reco_e" title="Link to this definition"></a></dt>
<dd><p>Calculates the probability density for the given log10(E_reco/GeV)
values using the spline representation of the PDF.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>log10_reco_e</strong> (<em>(</em><em>n_log10_reco_e</em><em>,</em><em>)</em><em>-shaped 1D numpy ndarray</em>) – The numpy ndarray holding the log10(E_reco/GeV) values for which
the energy PDF should get evaluated.</p></li>
<li><p><strong>tl</strong> (<em>TimeLord instance</em><em> | </em><em>None</em>) – The optional TimeLord instance that should be used to measure
timing information.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>pd</strong> (<em>(N_events,)-shaped numpy ndarray</em>) – The 1D numpy ndarray with the probability density for each event.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.signalpdf.PDSignalEnergyPDF.get_prob">
<span class="sig-name descname"><span class="pre">get_prob</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tdm</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tl</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.signalpdf.PDSignalEnergyPDF.get_prob" title="Link to this definition"></a></dt>
<dd><p>Calculates the probability density for the events given by the
TrialDataManager.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tdm</strong> (<em>TrialDataManager instance</em>) – <p>The TrialDataManager instance holding the data events for which the
probability should be looked up. The following data fields are
required:</p>
<blockquote>
<div><ul>
<li><dl class="simple">
<dt>’log_energy’</dt><dd><p>The log10 of the reconstructed energy.</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</p></li>
<li><p><strong>params</strong> (<em>dict</em><em> | </em><em>None</em>) – The dictionary containing the parameter names and values for which
the probability should get calculated.
By definition this PDF does not depend on parameters.</p></li>
<li><p><strong>tl</strong> (<em>TimeLord instance</em><em> | </em><em>None</em>) – The optional TimeLord instance that should be used to measure
timing information.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>pd</strong> (<em>(N_events,)-shaped numpy ndarray</em>) – The 1D numpy ndarray with the probability density for each event.</p></li>
<li><p><strong>grads</strong> (<em>(N_fitparams,N_events)-shaped ndarray | None</em>) – The 2D numpy ndarray holding the gradients of the PDF w.r.t.
each fit parameter for each event. The order of the gradients
is the same as the order of floating parameters specified through
the <code class="docutils literal notranslate"><span class="pre">param_set</span></code> property.
It is <code class="docutils literal notranslate"><span class="pre">None</span></code>, if this PDF does not depend on any parameters.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.signalpdf.PDSignalEnergyPDF.__annotations__">
<span class="sig-name descname"><span class="pre">__annotations__</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{}</span></em><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.signalpdf.PDSignalEnergyPDF.__annotations__" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.signalpdf.PDSignalEnergyPDF.__firstlineno__">
<span class="sig-name descname"><span class="pre">__firstlineno__</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">36</span></em><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.signalpdf.PDSignalEnergyPDF.__firstlineno__" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.signalpdf.PDSignalEnergyPDF.__static_attributes__">
<span class="sig-name descname"><span class="pre">__static_attributes__</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">('f_e_spl',</span> <span class="pre">'log10_reco_e_lower_binedges',</span> <span class="pre">'log10_reco_e_max',</span> <span class="pre">'log10_reco_e_min',</span> <span class="pre">'log10_reco_e_upper_binedges')</span></em><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.signalpdf.PDSignalEnergyPDF.__static_attributes__" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.signalpdf.PDSignalEnergyPDFSet">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">skyllh.analyses.i3.publicdata_ps.signalpdf.</span></span><span class="sig-name descname"><span class="pre">PDSignalEnergyPDFSet</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_dec</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flux_model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fitparam_grid_set</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ncpu</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ppbar</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.signalpdf.PDSignalEnergyPDFSet" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="skyllh.core.html#skyllh.core.pdf.PDFSet" title="skyllh.core.pdf.PDFSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">PDFSet</span></code></a>, <a class="reference internal" href="skyllh.core.html#skyllh.core.pdf.IsSignalPDF" title="skyllh.core.pdf.IsSignalPDF"><code class="xref py py-class docutils literal notranslate"><span class="pre">IsSignalPDF</span></code></a>, <a class="reference internal" href="skyllh.core.html#skyllh.core.multiproc.IsParallelizable" title="skyllh.core.multiproc.IsParallelizable"><code class="xref py py-class docutils literal notranslate"><span class="pre">IsParallelizable</span></code></a></p>
<p>This class provides a signal energy PDF set for the public data.
It creates a set of PDSignalEnergyPDF instances, one for each spectral
index value on a grid.</p>
<p>Creates a new PDSignalEnergyPDFSet instance for the public data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ds</strong> (<em>I3Dataset instance</em>) – The I3Dataset instance that defines the dataset of the public data.</p></li>
<li><p><strong>src_dec</strong> (<em>float</em>) – The declination of the source in radians.</p></li>
<li><p><strong>flux_model</strong> (<em>FluxModel instance</em>) – The FluxModel instance that defines the source’s flux model.</p></li>
<li><p><strong>fitparam_grid_set</strong> (<a class="reference internal" href="skyllh.core.html#skyllh.core.parameters.ParameterGrid" title="skyllh.core.parameters.ParameterGrid"><em>ParameterGrid</em></a><em> | </em><em>ParameterGridSet instance</em>) – The parameter grid set defining the grids of the fit parameters.</p></li>
<li><p><strong>ncpu</strong> (<em>int</em><em> | </em><em>None</em>) – The number of CPUs to utilize. Global setting will take place if
not specified, i.e. set to None.</p></li>
<li><p><strong>ppbar</strong> (<em>ProgressBar instance</em><em> | </em><em>None</em>) – The instance of ProgressBar for the optional parent progress bar.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.signalpdf.PDSignalEnergyPDFSet.get_prob">
<span class="sig-name descname"><span class="pre">get_prob</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tdm</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gridfitparams</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tl</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.signalpdf.PDSignalEnergyPDFSet.get_prob" title="Link to this definition"></a></dt>
<dd><p>Calculates the signal probability density of each event for the
given set of signal fit parameters on a grid.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tdm</strong> (<em>instance</em><em> of </em><a class="reference internal" href="skyllh.core.html#skyllh.core.trialdata.TrialDataManager" title="skyllh.core.trialdata.TrialDataManager"><em>TrialDataManager</em></a>) – <p>The TrialDataManager instance holding the data events for which the
probability should be calculated for. The following data fields must
exist:</p>
<ul>
<li><dl class="simple">
<dt>’log_energy’</dt><dd><p>The log10 of the reconstructed energy.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>’psi’</dt><dd><p>The opening angle from the source to the event in radians.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>’ang_err’</dt><dd><p>The angular error of the event in radians.</p>
</dd>
</dl>
</li>
</ul>
</p></li>
<li><p><strong>gridfitparams</strong> (<em>dict</em>) – The dictionary holding the signal parameter values for which the
signal energy probability should be calculated. Note, that the
parameter values must match a set of parameter grid values for which
a PDSignalPDF object has been created at construction time of this
PDSignalPDFSet object.</p></li>
<li><p><strong>tl</strong> (<em>TimeLord instance</em><em> | </em><em>None</em>) – The optional TimeLord instance that should be used to measure time.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>prob</strong> (<em>1d ndarray</em>) – The array with the signal energy probability for each event.</p></li>
<li><p><strong>grads</strong> (<em>(N_fitparams,N_events)-shaped ndarray | None</em>) – The 2D numpy ndarray holding the gradients of the PDF w.r.t.
each fit parameter for each event. The order of the gradients
is the same as the order of floating parameters specified through
the <code class="docutils literal notranslate"><span class="pre">param_set</span></code> property.
It is <code class="docutils literal notranslate"><span class="pre">None</span></code>, if this PDF does not depend on any parameters.</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>KeyError</strong> – If no energy PDF can be found for the given signal parameter values.</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.signalpdf.PDSignalEnergyPDFSet.__annotations__">
<span class="sig-name descname"><span class="pre">__annotations__</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{}</span></em><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.signalpdf.PDSignalEnergyPDFSet.__annotations__" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.signalpdf.PDSignalEnergyPDFSet.__firstlineno__">
<span class="sig-name descname"><span class="pre">__firstlineno__</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">155</span></em><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.signalpdf.PDSignalEnergyPDFSet.__firstlineno__" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.signalpdf.PDSignalEnergyPDFSet.__static_attributes__">
<span class="sig-name descname"><span class="pre">__static_attributes__</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">('_logger',)</span></em><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.signalpdf.PDSignalEnergyPDFSet.__static_attributes__" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="module-skyllh.analyses.i3.publicdata_ps.smearing_matrix">
<span id="skyllh-analyses-i3-publicdata-ps-smearing-matrix-module"></span><h2>skyllh.analyses.i3.publicdata_ps.smearing_matrix module<a class="headerlink" href="#module-skyllh.analyses.i3.publicdata_ps.smearing_matrix" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.smearing_matrix.load_smearing_histogram">
<span class="sig-prename descclassname"><span class="pre">skyllh.analyses.i3.publicdata_ps.smearing_matrix.</span></span><span class="sig-name descname"><span class="pre">load_smearing_histogram</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pathfilenames</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.smearing_matrix.load_smearing_histogram" title="Link to this definition"></a></dt>
<dd><p>Loads the 5D smearing histogram from the given data file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>pathfilenames</strong> (<em>str</em><em> | </em><em>list</em><em> of </em><em>str</em>) – The file name of the data file.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>histogram</strong> (<em>5d ndarray</em>) – The 5d histogram array holding the probability values of the smearing
matrix.
The axes are (true_e, true_dec, reco_e, psi, ang_err).</p></li>
<li><p><strong>true_e_bin_edges</strong> (<em>1d ndarray</em>) – The ndarray holding the bin edges of the true energy axis.</p></li>
<li><p><strong>true_dec_bin_edges</strong> (<em>1d ndarray</em>) – The ndarray holding the bin edges of the true declination axis in
radians.</p></li>
<li><p><strong>reco_e_lower_edges</strong> (<em>3d ndarray</em>) – The 3d ndarray holding the lower bin edges of the reco energy axis.
For each pair of true_e and true_dec different reco energy bin edges
are provided.
The shape is (n_true_e, n_true_dec, n_reco_e).</p></li>
<li><p><strong>reco_e_upper_edges</strong> (<em>3d ndarray</em>) – The 3d ndarray holding the upper bin edges of the reco energy axis.
For each pair of true_e and true_dec different reco energy bin edges
are provided.
The shape is (n_true_e, n_true_dec, n_reco_e).</p></li>
<li><p><strong>psi_lower_edges</strong> (<em>4d ndarray</em>) – The 4d ndarray holding the lower bin edges of the psi axis in radians.
The shape is (n_true_e, n_true_dec, n_reco_e, n_psi).</p></li>
<li><p><strong>psi_upper_edges</strong> (<em>4d ndarray</em>) – The 4d ndarray holding the upper bin edges of the psi axis in radians.
The shape is (n_true_e, n_true_dec, n_reco_e, n_psi).</p></li>
<li><p><strong>ang_err_lower_edges</strong> (<em>5d ndarray</em>) – The 5d ndarray holding the lower bin edges of the angular error axis
in radians.
The shape is (n_true_e, n_true_dec, n_reco_e, n_psi, n_ang_err).</p></li>
<li><p><strong>ang_err_upper_edges</strong> (<em>5d ndarray</em>) – The 5d ndarray holding the upper bin edges of the angular error axis
in radians.
The shape is (n_true_e, n_true_dec, n_reco_e, n_psi, n_ang_err).</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.smearing_matrix.PDSmearingMatrix">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">skyllh.analyses.i3.publicdata_ps.smearing_matrix.</span></span><span class="sig-name descname"><span class="pre">PDSmearingMatrix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pathfilenames</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.smearing_matrix.PDSmearingMatrix" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This class is a helper class for dealing with the smearing matrix
provided by the public data.</p>
<p>Creates a smearing matrix instance by loading the smearing matrix
from the given file.</p>
<dl class="py property">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.smearing_matrix.PDSmearingMatrix.n_log10_true_e_bins">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">n_log10_true_e_bins</span></span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.smearing_matrix.PDSmearingMatrix.n_log10_true_e_bins" title="Link to this definition"></a></dt>
<dd><p>(read-only) The number of log10 true energy bins.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.smearing_matrix.PDSmearingMatrix.true_e_bin_edges">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">true_e_bin_edges</span></span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.smearing_matrix.PDSmearingMatrix.true_e_bin_edges" title="Link to this definition"></a></dt>
<dd><p>(read-only) The (n_true_e+1,)-shaped 1D numpy ndarray holding the
bin edges of the true energy.</p>
<p>Depricated! Use log10_true_enu_binedges instead!</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.smearing_matrix.PDSmearingMatrix.true_e_bin_centers">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">true_e_bin_centers</span></span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.smearing_matrix.PDSmearingMatrix.true_e_bin_centers" title="Link to this definition"></a></dt>
<dd><p>(read-only) The (n_true_e,)-shaped 1D numpy ndarray holding the bin
center values of the true energy.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.smearing_matrix.PDSmearingMatrix.log10_true_enu_binedges">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">log10_true_enu_binedges</span></span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.smearing_matrix.PDSmearingMatrix.log10_true_enu_binedges" title="Link to this definition"></a></dt>
<dd><p>(read-only) The (n_log10_true_enu+1,)-shaped 1D numpy ndarray holding
the bin edges of the log10 true neutrino energy.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.smearing_matrix.PDSmearingMatrix.n_true_dec_bins">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">n_true_dec_bins</span></span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.smearing_matrix.PDSmearingMatrix.n_true_dec_bins" title="Link to this definition"></a></dt>
<dd><p>(read-only) The number of true declination bins.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.smearing_matrix.PDSmearingMatrix.true_dec_bin_edges">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">true_dec_bin_edges</span></span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.smearing_matrix.PDSmearingMatrix.true_dec_bin_edges" title="Link to this definition"></a></dt>
<dd><p>(read-only) The (n_true_dec+1,)-shaped 1D numpy ndarray holding the
bin edges of the true declination.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.smearing_matrix.PDSmearingMatrix.true_dec_bin_centers">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">true_dec_bin_centers</span></span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.smearing_matrix.PDSmearingMatrix.true_dec_bin_centers" title="Link to this definition"></a></dt>
<dd><p>(read-only) The (n_true_dec,)-shaped 1D ndarray holding the bin
center values of the true declination.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.smearing_matrix.PDSmearingMatrix.log10_reco_e_binedges_lower">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">log10_reco_e_binedges_lower</span></span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.smearing_matrix.PDSmearingMatrix.log10_reco_e_binedges_lower" title="Link to this definition"></a></dt>
<dd><p>(read-only) The upper bin edges of the log10 reco energy axes.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.smearing_matrix.PDSmearingMatrix.log10_reco_e_binedges_upper">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">log10_reco_e_binedges_upper</span></span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.smearing_matrix.PDSmearingMatrix.log10_reco_e_binedges_upper" title="Link to this definition"></a></dt>
<dd><p>(read-only) The upper bin edges of the log10 reco energy axes.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.smearing_matrix.PDSmearingMatrix.min_log10_reco_e">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">min_log10_reco_e</span></span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.smearing_matrix.PDSmearingMatrix.min_log10_reco_e" title="Link to this definition"></a></dt>
<dd><p>(read-only) The minimum value of the reconstructed energy axis.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.smearing_matrix.PDSmearingMatrix.max_log10_reco_e">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">max_log10_reco_e</span></span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.smearing_matrix.PDSmearingMatrix.max_log10_reco_e" title="Link to this definition"></a></dt>
<dd><p>(read-only) The maximum value of the reconstructed energy axis.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.smearing_matrix.PDSmearingMatrix.min_log10_psi">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">min_log10_psi</span></span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.smearing_matrix.PDSmearingMatrix.min_log10_psi" title="Link to this definition"></a></dt>
<dd><p>(read-only) The minimum log10 value of the psi axis.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.smearing_matrix.PDSmearingMatrix.max_log10_psi">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">max_log10_psi</span></span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.smearing_matrix.PDSmearingMatrix.max_log10_psi" title="Link to this definition"></a></dt>
<dd><p>(read-only) The maximum log10 value of the psi axis.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.smearing_matrix.PDSmearingMatrix.pdf">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">pdf</span></span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.smearing_matrix.PDSmearingMatrix.pdf" title="Link to this definition"></a></dt>
<dd><p>(read-only) The probability-density-function
P(E_reco,psi,ang_err|E_nu,dec_nu), which, by definition, is the
histogram property divided by the 3D bin volumes for E_reco, psi, and
ang_err.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.smearing_matrix.PDSmearingMatrix.get_true_dec_idx">
<span class="sig-name descname"><span class="pre">get_true_dec_idx</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">true_dec</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.smearing_matrix.PDSmearingMatrix.get_true_dec_idx" title="Link to this definition"></a></dt>
<dd><p>Returns the true declination index for the given true declination
value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>true_dec</strong> (<em>float</em>) – The true declination value in radians.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>true_dec_idx</strong> (<em>int</em>) – The index of the declination bin for the given declination value.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.smearing_matrix.PDSmearingMatrix.get_log10_true_e_idx">
<span class="sig-name descname"><span class="pre">get_log10_true_e_idx</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">log10_true_e</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.smearing_matrix.PDSmearingMatrix.get_log10_true_e_idx" title="Link to this definition"></a></dt>
<dd><p>Returns the bin index for the given true log10 energy value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>log10_true_e</strong> (<em>float</em>) – The log10 value of the true energy.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>log10_true_e_idx</strong> (<em>int</em>) – The index of the true log10 energy bin for the given log10 true
energy value.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.smearing_matrix.PDSmearingMatrix.get_reco_e_idx">
<span class="sig-name descname"><span class="pre">get_reco_e_idx</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">true_e_idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">true_dec_idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reco_e</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.smearing_matrix.PDSmearingMatrix.get_reco_e_idx" title="Link to this definition"></a></dt>
<dd><p>Returns the bin index for the given reco energy value given the
given true energy and true declination bin indices.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>true_e_idx</strong> (<em>int</em>) – The index of the true energy bin.</p></li>
<li><p><strong>true_dec_idx</strong> (<em>int</em>) – The index of the true declination bin.</p></li>
<li><p><strong>reco_e</strong> (<em>float</em>) – The reco energy value for which the bin index should get returned.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>reco_e_idx</strong> (<em>int | None</em>) – The index of the reco energy bin the given reco energy value falls
into. It returns None if the value is out of range.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.smearing_matrix.PDSmearingMatrix.get_psi_idx">
<span class="sig-name descname"><span class="pre">get_psi_idx</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">true_e_idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">true_dec_idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reco_e_idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">psi</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.smearing_matrix.PDSmearingMatrix.get_psi_idx" title="Link to this definition"></a></dt>
<dd><p>Returns the bin index for the given psi value given the
true energy, true declination and reco energy bin indices.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>true_e_idx</strong> (<em>int</em>) – The index of the true energy bin.</p></li>
<li><p><strong>true_dec_idx</strong> (<em>int</em>) – The index of the true declination bin.</p></li>
<li><p><strong>reco_e_idx</strong> (<em>int</em>) – The index of the reco energy bin.</p></li>
<li><p><strong>psi</strong> (<em>float</em>) – The psi value in radians for which the bin index should get
returned.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>psi_idx</strong> (<em>int | None</em>) – The index of the psi bin the given psi value falls into.
It returns None if the value is out of range.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.smearing_matrix.PDSmearingMatrix.get_ang_err_idx">
<span class="sig-name descname"><span class="pre">get_ang_err_idx</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">true_e_idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">true_dec_idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reco_e_idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">psi_idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ang_err</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.smearing_matrix.PDSmearingMatrix.get_ang_err_idx" title="Link to this definition"></a></dt>
<dd><p>Returns the bin index for the given angular error value given the
true energy, true declination, reco energy, and psi bin indices.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>true_e_idx</strong> (<em>int</em>) – The index of the true energy bin.</p></li>
<li><p><strong>true_dec_idx</strong> (<em>int</em>) – The index of the true declination bin.</p></li>
<li><p><strong>reco_e_idx</strong> (<em>int</em>) – The index of the reco energy bin.</p></li>
<li><p><strong>psi_idx</strong> (<em>int</em>) – The index of the psi bin.</p></li>
<li><p><strong>ang_err</strong> (<em>float</em>) – The angular error value in radians for which the bin index should
get returned.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ang_err_idx</strong> (<em>int | None</em>) – The index of the angular error bin the given angular error value
falls into. It returns None if the value is out of range.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.smearing_matrix.PDSmearingMatrix.get_true_log_e_range_with_valid_log_e_pdfs">
<span class="sig-name descname"><span class="pre">get_true_log_e_range_with_valid_log_e_pdfs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dec_idx</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.smearing_matrix.PDSmearingMatrix.get_true_log_e_range_with_valid_log_e_pdfs" title="Link to this definition"></a></dt>
<dd><p>Determines the true log energy range for which log_e PDFs are
available for the given declination bin.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>dec_idx</strong> (<em>int</em>) – The declination bin index.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>min_log_true_e</strong> (<em>float</em>) – The minimum true log energy value.</p></li>
<li><p><strong>max_log_true_e</strong> (<em>float</em>) – The maximum true log energy value.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.smearing_matrix.PDSmearingMatrix.get_log_e_pdf">
<span class="sig-name descname"><span class="pre">get_log_e_pdf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">log_true_e_idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dec_idx</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.smearing_matrix.PDSmearingMatrix.get_log_e_pdf" title="Link to this definition"></a></dt>
<dd><p>Retrieves the log_e PDF from the given true energy bin index and
source bin index.
Returns (None, None, None, None) if any of the bin indices are less then
zero, or if the sum of all pdf bins is zero.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>log_true_e_idx</strong> (<em>int</em>) – The index of the true energy bin.</p></li>
<li><p><strong>dec_idx</strong> (<em>int</em>) – The index of the declination bin.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>pdf</strong> (<em>1d ndarray</em>) – The log_e pdf values.</p></li>
<li><p><strong>lower_bin_edges</strong> (<em>1d ndarray</em>) – The lower bin edges of the energy pdf histogram.</p></li>
<li><p><strong>upper_bin_edges</strong> (<em>1d ndarray</em>) – The upper bin edges of the energy pdf histogram.</p></li>
<li><p><strong>bin_widths</strong> (<em>1d ndarray</em>) – The bin widths of the energy pdf histogram.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.smearing_matrix.PDSmearingMatrix.get_psi_pdf">
<span class="sig-name descname"><span class="pre">get_psi_pdf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">log_true_e_idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dec_idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_e_idx</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.smearing_matrix.PDSmearingMatrix.get_psi_pdf" title="Link to this definition"></a></dt>
<dd><p>Retrieves the psi PDF from the given true energy bin index, the
source bin index, and the log_e bin index.
Returns (None, None, None, None) if any of the bin indices are less then
zero, or if the sum of all pdf bins is zero.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>log_true_e_idx</strong> (<em>int</em>) – The index of the true energy bin.</p></li>
<li><p><strong>dec_idx</strong> (<em>int</em>) – The index of the declination bin.</p></li>
<li><p><strong>log_e_idx</strong> (<em>int</em>) – The index of the log_e bin.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>pdf</strong> (<em>1d ndarray</em>) – The psi pdf values.</p></li>
<li><p><strong>lower_bin_edges</strong> (<em>1d ndarray</em>) – The lower bin edges of the psi pdf histogram.</p></li>
<li><p><strong>upper_bin_edges</strong> (<em>1d ndarray</em>) – The upper bin edges of the psi pdf histogram.</p></li>
<li><p><strong>bin_widths</strong> (<em>1d ndarray</em>) – The bin widths of the psi pdf histogram.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.smearing_matrix.PDSmearingMatrix.get_ang_err_pdf">
<span class="sig-name descname"><span class="pre">get_ang_err_pdf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">log_true_e_idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dec_idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_e_idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">psi_idx</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.smearing_matrix.PDSmearingMatrix.get_ang_err_pdf" title="Link to this definition"></a></dt>
<dd><p>Retrieves the angular error PDF from the given true energy bin index,
the source bin index, the log_e bin index, and the psi bin index.
Returns (None, None, None, None) if any of the bin indices are less then
zero, or if the sum of all pdf bins is zero.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>log_true_e_idx</strong> (<em>int</em>) – The index of the true energy bin.</p></li>
<li><p><strong>dec_idx</strong> (<em>int</em>) – The index of the declination bin.</p></li>
<li><p><strong>log_e_idx</strong> (<em>int</em>) – The index of the log_e bin.</p></li>
<li><p><strong>psi_idx</strong> (<em>int</em>) – The index of the psi bin.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>pdf</strong> (<em>1d ndarray</em>) – The ang_err pdf values.</p></li>
<li><p><strong>lower_bin_edges</strong> (<em>1d ndarray</em>) – The lower bin edges of the ang_err pdf histogram.</p></li>
<li><p><strong>upper_bin_edges</strong> (<em>1d ndarray</em>) – The upper bin edges of the ang_err pdf histogram.</p></li>
<li><p><strong>bin_widths</strong> (<em>1d ndarray</em>) – The bin widths of the ang_err pdf histogram.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.smearing_matrix.PDSmearingMatrix.sample_log_e">
<span class="sig-name descname"><span class="pre">sample_log_e</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rss</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dec_idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_true_e_idxs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.smearing_matrix.PDSmearingMatrix.sample_log_e" title="Link to this definition"></a></dt>
<dd><p>Samples log energy values for the given source declination and true
energy bins.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>rss</strong> (<em>instance</em><em> of </em><a class="reference internal" href="skyllh.core.html#skyllh.core.random.RandomStateService" title="skyllh.core.random.RandomStateService"><em>RandomStateService</em></a>) – The RandomStateService which should be used for drawing random
numbers from.</p></li>
<li><p><strong>dec_idx</strong> (<em>int</em>) – The index of the source declination bin.</p></li>
<li><p><strong>log_true_e_idxs</strong> (<em>1d ndarray</em><em> of </em><em>int</em>) – The bin indices of the true energy bins.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>log_e_idx</strong> (<em>1d ndarray of int</em>) – The bin indices of the log_e pdf corresponding to the sampled
log_e values.</p></li>
<li><p><strong>log_e</strong> (<em>1d ndarray of float</em>) – The sampled log_e values.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.smearing_matrix.PDSmearingMatrix.sample_psi">
<span class="sig-name descname"><span class="pre">sample_psi</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rss</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dec_idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_true_e_idxs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_e_idxs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.smearing_matrix.PDSmearingMatrix.sample_psi" title="Link to this definition"></a></dt>
<dd><p>Samples psi values for the given source declination, true
energy bins, and log_e bins.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>rss</strong> (<em>instance</em><em> of </em><a class="reference internal" href="skyllh.core.html#skyllh.core.random.RandomStateService" title="skyllh.core.random.RandomStateService"><em>RandomStateService</em></a>) – The RandomStateService which should be used for drawing random
numbers from.</p></li>
<li><p><strong>dec_idx</strong> (<em>int</em>) – The index of the source declination bin.</p></li>
<li><p><strong>log_true_e_idxs</strong> (<em>1d ndarray</em><em> of </em><em>int</em>) – The bin indices of the true energy bins.</p></li>
<li><p><strong>log_e_idxs</strong> (<em>1d ndarray</em><em> of </em><em>int</em>) – The bin indices of the log_e bins.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>psi_idx</strong> (<em>1d ndarray of int</em>) – The bin indices of the psi pdf corresponding to the sampled psi
values.</p></li>
<li><p><strong>psi</strong> (<em>1d ndarray of float</em>) – The sampled psi values in radians.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.smearing_matrix.PDSmearingMatrix.sample_ang_err">
<span class="sig-name descname"><span class="pre">sample_ang_err</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rss</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dec_idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_true_e_idxs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_e_idxs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">psi_idxs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.smearing_matrix.PDSmearingMatrix.sample_ang_err" title="Link to this definition"></a></dt>
<dd><p>Samples ang_err values for the given source declination, true
energy bins, log_e bins, and psi bins.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>rss</strong> (<em>instance</em><em> of </em><a class="reference internal" href="skyllh.core.html#skyllh.core.random.RandomStateService" title="skyllh.core.random.RandomStateService"><em>RandomStateService</em></a>) – The RandomStateService which should be used for drawing random
numbers from.</p></li>
<li><p><strong>dec_idx</strong> (<em>int</em>) – The index of the source declination bin.</p></li>
<li><p><strong>log_true_e_idxs</strong> (<em>1d ndarray</em><em> of </em><em>int</em>) – The bin indices of the true energy bins.</p></li>
<li><p><strong>log_e_idxs</strong> (<em>1d ndarray</em><em> of </em><em>int</em>) – The bin indices of the log_e bins.</p></li>
<li><p><strong>psi_idxs</strong> (<em>1d ndarray</em><em> of </em><em>int</em>) – The bin indices of the psi bins.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>ang_err_idx</strong> (<em>1d ndarray of int</em>) – The bin indices of the angular error pdf corresponding to the
sampled angular error values.</p></li>
<li><p><strong>ang_err</strong> (<em>1d ndarray of float</em>) – The sampled angular error values in radians.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.smearing_matrix.PDSmearingMatrix.__firstlineno__">
<span class="sig-name descname"><span class="pre">__firstlineno__</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">175</span></em><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.smearing_matrix.PDSmearingMatrix.__firstlineno__" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.smearing_matrix.PDSmearingMatrix.__static_attributes__">
<span class="sig-name descname"><span class="pre">__static_attributes__</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">('_true_dec_bin_edges',</span> <span class="pre">'_true_e_bin_edges',</span> <span class="pre">'ang_err_binedges',</span> <span class="pre">'ang_err_lower_edges',</span> <span class="pre">'ang_err_upper_edges',</span> <span class="pre">'histogram',</span> <span class="pre">'log10_reco_e_binedges',</span> <span class="pre">'n_ang_err_bins',</span> <span class="pre">'n_psi_bins',</span> <span class="pre">'psi_binedges',</span> <span class="pre">'psi_lower_edges',</span> <span class="pre">'psi_upper_edges',</span> <span class="pre">'reco_e_lower_edges',</span> <span class="pre">'reco_e_upper_edges')</span></em><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.smearing_matrix.PDSmearingMatrix.__static_attributes__" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="module-skyllh.analyses.i3.publicdata_ps.time_dependent_ps">
<span id="skyllh-analyses-i3-publicdata-ps-time-dependent-ps-module"></span><h2>skyllh.analyses.i3.publicdata_ps.time_dependent_ps module<a class="headerlink" href="#module-skyllh.analyses.i3.publicdata_ps.time_dependent_ps" title="Link to this heading"></a></h2>
<p>Setup the time-dependent analysis. For now this works on a single dataset.</p>
<dl class="py function">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.time_dependent_ps.change_time_pdf">
<span class="sig-prename descclassname"><span class="pre">skyllh.analyses.i3.publicdata_ps.time_dependent_ps.</span></span><span class="sig-name descname"><span class="pre">change_time_pdf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">analysis</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gauss</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">box</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.time_dependent_ps.change_time_pdf" title="Link to this definition"></a></dt>
<dd><p>Changes the time pdf.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>gauss</strong> (<em>dict</em><em> | </em><em>None</em>) – None or dictionary with {“mu”: float, “sigma”: float}.</p></li>
<li><p><strong>box</strong> (<em>dict</em><em> | </em><em>None</em>) – None or dictionary with {“start”: float, “end”: float}.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.time_dependent_ps.get_energy_spatial_signal_over_background">
<span class="sig-prename descclassname"><span class="pre">skyllh.analyses.i3.publicdata_ps.time_dependent_ps.</span></span><span class="sig-name descname"><span class="pre">get_energy_spatial_signal_over_background</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">analysis</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fitparams</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.time_dependent_ps.get_energy_spatial_signal_over_background" title="Link to this definition"></a></dt>
<dd><p>Returns the signal over background ratio for
(spatial_signal * energy_signal) / (spatial_background * energy_background).</p>
<section id="parameter">
<h3>Parameter<a class="headerlink" href="#parameter" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>fitparams<span class="classifier">dict</span></dt><dd><p>Dictionary with {“gamma”: float} for energy pdf.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ratio</strong> (<em>1d ndarray</em>) – Product of spatial and energy signal over background pdfs.</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.time_dependent_ps.change_fluxmodel_gamma">
<span class="sig-prename descclassname"><span class="pre">skyllh.analyses.i3.publicdata_ps.time_dependent_ps.</span></span><span class="sig-name descname"><span class="pre">change_fluxmodel_gamma</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">analysis</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gamma</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.time_dependent_ps.change_fluxmodel_gamma" title="Link to this definition"></a></dt>
<dd><p>Set new gamma for the flux model.</p>
<section id="id2">
<h3>Parameter<a class="headerlink" href="#id2" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>gamma<span class="classifier">float</span></dt><dd><p>Spectral index for flux model.</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.time_dependent_ps.change_signal_time">
<span class="sig-prename descclassname"><span class="pre">skyllh.analyses.i3.publicdata_ps.time_dependent_ps.</span></span><span class="sig-name descname"><span class="pre">change_signal_time</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">analysis</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gauss</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">box</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.time_dependent_ps.change_signal_time" title="Link to this definition"></a></dt>
<dd><p>Change the signal injection to gauss or box.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>gauss</strong> (<em>dict</em><em> | </em><em>None</em>) – None or dictionary {“mu”: float, “sigma”: float}.</p></li>
<li><p><strong>box</strong> (<em>dict</em><em> | </em><em>None</em>) – None or dictionary {“start” : float, “end” : float}.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.time_dependent_ps.calculate_TS">
<span class="sig-prename descclassname"><span class="pre">skyllh.analyses.i3.publicdata_ps.time_dependent_ps.</span></span><span class="sig-name descname"><span class="pre">calculate_TS</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">analysis</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">em_results</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rss</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.time_dependent_ps.calculate_TS" title="Link to this definition"></a></dt>
<dd><p>Calculate the best TS value for the expectation maximization gamma scan.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>em_results</strong> (<em>1d ndarray</em><em> of </em><em>tuples</em>) – Gamma scan result.</p></li>
<li><p><strong>rss</strong> (<em>instance</em><em> of </em><a class="reference internal" href="skyllh.core.html#skyllh.core.random.RandomStateService" title="skyllh.core.random.RandomStateService"><em>RandomStateService</em></a>) – The instance of RandomStateService that should be used to generate
random numbers from.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>float maximized TS value</em></p></li>
<li><p><em>tuple(gamma from em scan [float], best fit mean time [float], best fit width [float])</em></p></li>
<li><p><em>(float ns, float gamma) fitparams from TS optimization</em></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.time_dependent_ps.run_gamma_scan_single_flare">
<span class="sig-prename descclassname"><span class="pre">skyllh.analyses.i3.publicdata_ps.time_dependent_ps.</span></span><span class="sig-name descname"><span class="pre">run_gamma_scan_single_flare</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">analysis</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remove_time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gamma_min</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gamma_max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_gamma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">51</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.time_dependent_ps.run_gamma_scan_single_flare" title="Link to this definition"></a></dt>
<dd><p>Run em for different gammas in the signal energy pdf</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>remove_time</strong> (<em>float</em>) – Time information of event that should be removed.</p></li>
<li><p><strong>gamma_min</strong> (<em>float</em>) – Lower bound for gamma scan.</p></li>
<li><p><strong>gamma_max</strong> (<em>float</em>) – Upper bound for gamma scan.</p></li>
<li><p><strong>n_gamma</strong> (<em>int</em>) – Number of steps for gamma scan.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><em>array with “gamma”, “mu”, “sigma”, and scaling factor for flare “ns_em”</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.time_dependent_ps.unblind_flare">
<span class="sig-prename descclassname"><span class="pre">skyllh.analyses.i3.publicdata_ps.time_dependent_ps.</span></span><span class="sig-name descname"><span class="pre">unblind_flare</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">analysis</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remove_time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.time_dependent_ps.unblind_flare" title="Link to this definition"></a></dt>
<dd><p>Run EM on unscrambled data. Similar to the original analysis, remove the alert event.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>remove_time</strong> (<em>float</em>) – Time information of event that should be removed.
In the case of the TXS analysis: remove_time=58018.8711856</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><em>array with “gamma”, “mu”, “sigma”, and scaling factor for flare “ns_em”</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.time_dependent_ps.create_analysis">
<span class="sig-prename descclassname"><span class="pre">skyllh.analyses.i3.publicdata_ps.time_dependent_ps.</span></span><span class="sig-name descname"><span class="pre">create_analysis</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">datasets</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gauss</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">box</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">refplflux_Phi0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">refplflux_E0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1000.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">refplflux_gamma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ns_seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ns_min</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ns_max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1000.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gamma_seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gamma_min</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gamma_max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kde_smoothing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minimizer_impl</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'LBFGS'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cut_sindec</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spl_smooth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cap_ratio</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">compress_data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_data_fields</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">optimize_delta_angle</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tl</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ppbar</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.time_dependent_ps.create_analysis" title="Link to this definition"></a></dt>
<dd><p>Creates the Analysis instance for this particular analysis.</p>
<section id="id3">
<h3>Parameters:<a class="headerlink" href="#id3" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>datasets<span class="classifier">list of Dataset instances</span></dt><dd><p>The list of Dataset instances, which should be used in the
analysis.</p>
</dd>
<dt>source<span class="classifier">PointLikeSource instance</span></dt><dd><p>The PointLikeSource instance defining the point source position.</p>
</dd>
<dt>gauss<span class="classifier">None or dictionary with mu, sigma</span></dt><dd><p>None if no Gaussian time pdf. Else dictionary with {“mu”: float, “sigma”: float} of Gauss</p>
</dd>
<dt>box<span class="classifier">None or dictionary with start, end</span></dt><dd><p>None if no Box shaped time pdf. Else dictionary with {“start”: float, “end”: float} of box.</p>
</dd>
<dt>refplflux_Phi0<span class="classifier">float</span></dt><dd><p>The flux normalization to use for the reference power law flux model.</p>
</dd>
<dt>refplflux_E0<span class="classifier">float</span></dt><dd><p>The reference energy to use for the reference power law flux model.</p>
</dd>
<dt>refplflux_gamma<span class="classifier">float</span></dt><dd><p>The spectral index to use for the reference power law flux model.</p>
</dd>
<dt>ns_seed<span class="classifier">float</span></dt><dd><p>Value to seed the minimizer with for the ns fit.</p>
</dd>
<dt>ns_min<span class="classifier">float</span></dt><dd><p>Lower bound for ns fit.</p>
</dd>
<dt>ns_max<span class="classifier">float</span></dt><dd><p>Upper bound for ns fit.</p>
</dd>
<dt>gamma_seed<span class="classifier">float | None</span></dt><dd><p>Value to seed the minimizer with for the gamma fit. If set to None,
the refplflux_gamma value will be set as gamma_seed.</p>
</dd>
<dt>gamma_min<span class="classifier">float</span></dt><dd><p>Lower bound for gamma fit.</p>
</dd>
<dt>gamma_max<span class="classifier">float</span></dt><dd><p>Upper bound for gamma fit.</p>
</dd>
<dt>kde_smoothing<span class="classifier">bool</span></dt><dd><p>Apply a KDE-based smoothing to the data-driven background pdf.
Default: False.</p>
</dd>
<dt>minimizer_impl<span class="classifier">str | “LBFGS”</span></dt><dd><p>Minimizer implementation to be used. Supported options are “LBFGS”
(L-BFG-S minimizer used from the <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/optimize.html#module-scipy.optimize" title="(in SciPy v1.16.2)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">scipy.optimize</span></code></a> module), or
“minuit” (Minuit minimizer used by the <code class="xref py py-mod docutils literal notranslate"><span class="pre">iminuit</span></code> module).
Default: “LBFGS”.</p>
</dd>
<dt>cut_sindec<span class="classifier">list of float | None</span></dt><dd><p>sin(dec) values at which the energy cut in the southern sky should
start. If None, np.sin(np.radians([-2, 0, -3, 0, 0])) is used.</p>
</dd>
<dt>spl_smooth<span class="classifier">list of float</span></dt><dd><p>Smoothing parameters for the 1D spline for the energy cut. If None,
[0., 0.005, 0.05, 0.2, 0.3] is used.</p>
</dd>
<dt>cap_ratio<span class="classifier">bool</span></dt><dd><p>If set to True, the energy PDF ratio will be capped to a finite value
where no background energy PDF information is available. This will
ensure that an energy PDF ratio is available for high energies where
no background is available from the experimental data.
If kde_smoothing is set to True, cap_ratio should be set to False!
Default is False.</p>
</dd>
<dt>compress_data<span class="classifier">bool</span></dt><dd><p>Flag if the data should get converted from float64 into float32.</p>
</dd>
<dt>keep_data_fields<span class="classifier">list of str | None</span></dt><dd><p>List of additional data field names that should get kept when loading
the data.</p>
</dd>
<dt>optimize_delta_angle<span class="classifier">float</span></dt><dd><p>The delta angle in degrees for the event selection optimization methods.</p>
</dd>
<dt>tl<span class="classifier">TimeLord instance | None</span></dt><dd><p>The TimeLord instance to use to time the creation of the analysis.</p>
</dd>
<dt>ppbar<span class="classifier">ProgressBar instance | None</span></dt><dd><p>The instance of ProgressBar for the optional parent progress bar.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>analysis</strong> (<em>TimeIntegratedMultiDatasetSingleSourceAnalysis</em>) – The Analysis instance for this analysis.</p>
</dd>
</dl>
</section>
</dd></dl>

</section>
<section id="module-skyllh.analyses.i3.publicdata_ps.time_integrated_ps">
<span id="skyllh-analyses-i3-publicdata-ps-time-integrated-ps-module"></span><h2>skyllh.analyses.i3.publicdata_ps.time_integrated_ps module<a class="headerlink" href="#module-skyllh.analyses.i3.publicdata_ps.time_integrated_ps" title="Link to this heading"></a></h2>
<p>The time_integrated_ps analysis is a multi-dataset time-integrated single source
analysis with a two-component likelihood function using a spacial and an energy
event PDF.</p>
<dl class="py function">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.time_integrated_ps.psi_func">
<span class="sig-prename descclassname"><span class="pre">skyllh.analyses.i3.publicdata_ps.time_integrated_ps.</span></span><span class="sig-name descname"><span class="pre">psi_func</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tdm</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_hypo_group_manager</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fitparams</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.time_integrated_ps.psi_func" title="Link to this definition"></a></dt>
<dd><p>Function to calculate the opening angle between the source position
and the event’s reconstructed position.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.time_integrated_ps.TXS_location">
<span class="sig-prename descclassname"><span class="pre">skyllh.analyses.i3.publicdata_ps.time_integrated_ps.</span></span><span class="sig-name descname"><span class="pre">TXS_location</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.time_integrated_ps.TXS_location" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.time_integrated_ps.create_analysis">
<span class="sig-prename descclassname"><span class="pre">skyllh.analyses.i3.publicdata_ps.time_integrated_ps.</span></span><span class="sig-name descname"><span class="pre">create_analysis</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">datasets</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">refplflux_Phi0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">refplflux_E0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1000.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">refplflux_gamma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ns_seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ns_min</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ns_max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1000.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gamma_seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gamma_min</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gamma_max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kde_smoothing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minimizer_impl</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'LBFGS'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cut_sindec</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spl_smooth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cap_ratio</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">compress_data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_data_fields</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">optimize_delta_angle</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tl</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ppbar</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.time_integrated_ps.create_analysis" title="Link to this definition"></a></dt>
<dd><p>Creates the Analysis instance for this particular analysis.</p>
<section id="id4">
<h3>Parameters:<a class="headerlink" href="#id4" title="Link to this heading"></a></h3>
<dl class="simple">
<dt>datasets<span class="classifier">list of Dataset instances</span></dt><dd><p>The list of Dataset instances, which should be used in the
analysis.</p>
</dd>
<dt>source<span class="classifier">PointLikeSource instance</span></dt><dd><p>The PointLikeSource instance defining the point source position.</p>
</dd>
<dt>refplflux_Phi0<span class="classifier">float</span></dt><dd><p>The flux normalization to use for the reference power law flux model.</p>
</dd>
<dt>refplflux_E0<span class="classifier">float</span></dt><dd><p>The reference energy to use for the reference power law flux model.</p>
</dd>
<dt>refplflux_gamma<span class="classifier">float</span></dt><dd><p>The spectral index to use for the reference power law flux model.</p>
</dd>
<dt>ns_seed<span class="classifier">float</span></dt><dd><p>Value to seed the minimizer with for the ns fit.</p>
</dd>
<dt>ns_min<span class="classifier">float</span></dt><dd><p>Lower bound for ns fit.</p>
</dd>
<dt>ns_max<span class="classifier">float</span></dt><dd><p>Upper bound for ns fit.</p>
</dd>
<dt>gamma_seed<span class="classifier">float | None</span></dt><dd><p>Value to seed the minimizer with for the gamma fit. If set to None,
the refplflux_gamma value will be set as gamma_seed.</p>
</dd>
<dt>gamma_min<span class="classifier">float</span></dt><dd><p>Lower bound for gamma fit.</p>
</dd>
<dt>gamma_max<span class="classifier">float</span></dt><dd><p>Upper bound for gamma fit.</p>
</dd>
<dt>kde_smoothing<span class="classifier">bool</span></dt><dd><p>Apply a KDE-based smoothing to the data-driven background pdf.
Default: False.</p>
</dd>
<dt>minimizer_impl<span class="classifier">str | “LBFGS”</span></dt><dd><p>Minimizer implementation to be used. Supported options are “LBFGS”
(L-BFG-S minimizer used from the <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/optimize.html#module-scipy.optimize" title="(in SciPy v1.16.2)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">scipy.optimize</span></code></a> module), or
“minuit” (Minuit minimizer used by the <code class="xref py py-mod docutils literal notranslate"><span class="pre">iminuit</span></code> module).
Default: “LBFGS”.</p>
</dd>
<dt>cut_sindec<span class="classifier">list of float | None</span></dt><dd><p>sin(dec) values at which the energy cut in the southern sky should
start. If None, np.sin(np.radians([-2, 0, -3, 0, 0])) is used.</p>
</dd>
<dt>spl_smooth<span class="classifier">list of float</span></dt><dd><p>Smoothing parameters for the 1D spline for the energy cut. If None,
[0., 0.005, 0.05, 0.2, 0.3] is used.</p>
</dd>
<dt>cap_ratio<span class="classifier">bool</span></dt><dd><p>If set to True, the energy PDF ratio will be capped to a finite value
where no background energy PDF information is available. This will
ensure that an energy PDF ratio is available for high energies where
no background is available from the experimental data.
If kde_smoothing is set to True, cap_ratio should be set to False!
Default is False.</p>
</dd>
<dt>compress_data<span class="classifier">bool</span></dt><dd><p>Flag if the data should get converted from float64 into float32.</p>
</dd>
<dt>keep_data_fields<span class="classifier">list of str | None</span></dt><dd><p>List of additional data field names that should get kept when loading
the data.</p>
</dd>
<dt>optimize_delta_angle<span class="classifier">float</span></dt><dd><p>The delta angle in degrees for the event selection optimization methods.</p>
</dd>
<dt>tl<span class="classifier">TimeLord instance | None</span></dt><dd><p>The TimeLord instance to use to time the creation of the analysis.</p>
</dd>
<dt>ppbar<span class="classifier">ProgressBar instance | None</span></dt><dd><p>The instance of ProgressBar for the optional parent progress bar.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>analysis</strong> (<em>TimeIntegratedMultiDatasetSingleSourceAnalysis</em>) – The Analysis instance for this analysis.</p>
</dd>
</dl>
</section>
</dd></dl>

</section>
<section id="module-skyllh.analyses.i3.publicdata_ps.utils">
<span id="skyllh-analyses-i3-publicdata-ps-utils-module"></span><h2>skyllh.analyses.i3.publicdata_ps.utils module<a class="headerlink" href="#module-skyllh.analyses.i3.publicdata_ps.utils" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.utils.FctSpline1D">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">skyllh.analyses.i3.publicdata_ps.utils.</span></span><span class="sig-name descname"><span class="pre">FctSpline1D</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x_binedges</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">norm</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.utils.FctSpline1D" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class to represent a 1D function spline using the PchipInterpolator
class from scipy.</p>
<p>The evaluate the spline, use the <code class="docutils literal notranslate"><span class="pre">__call__</span></code> method.</p>
<p>Creates a new 1D function spline using the PchipInterpolator
class from scipy.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>f</strong> (<em>(</em><em>n_x</em><em>,</em><em>)</em><em>-shaped 1D numpy ndarray</em>) – The numpy ndarray holding the function values at the bin centers.</p></li>
<li><p><strong>x_binedges</strong> (<em>(</em><em>n_x+1</em><em>,</em><em>)</em><em>-shaped 1D numpy ndarray</em>) – The numpy ndarray holding the bin edges of the x-axis.</p></li>
<li><p><strong>norm</strong> (<em>bool</em>) – Whether to precalculate and save normalization internally.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.utils.FctSpline1D.__call__">
<span class="sig-name descname"><span class="pre">__call__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">oor_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.utils.FctSpline1D.__call__" title="Link to this definition"></a></dt>
<dd><p>Evaluates the spline at the given x values. For x-values
outside the spline’s range, the oor_value is returned.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>(</em><em>n_x</em><em>,</em><em>)</em><em>-shaped 1D numpy ndarray</em>) – The numpy ndarray holding the x values at which the spline should
get evaluated.</p></li>
<li><p><strong>oor_value</strong> (<em>float</em>) – The value for out-of-range (oor) coordinates.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>f</strong> (<em>(n_x,)-shaped 1D numpy ndarray</em>) – The numpy ndarray holding the evaluated values of the spline.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.utils.FctSpline1D.evaluate">
<span class="sig-name descname"><span class="pre">evaluate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.utils.FctSpline1D.evaluate" title="Link to this definition"></a></dt>
<dd><p>Alias for the __call__ method.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.utils.FctSpline1D.__firstlineno__">
<span class="sig-name descname"><span class="pre">__firstlineno__</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">11</span></em><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.utils.FctSpline1D.__firstlineno__" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.utils.FctSpline1D.__static_attributes__">
<span class="sig-name descname"><span class="pre">__static_attributes__</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">('norm',</span> <span class="pre">'spl_f',</span> <span class="pre">'x_binedges',</span> <span class="pre">'x_max',</span> <span class="pre">'x_min')</span></em><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.utils.FctSpline1D.__static_attributes__" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.utils.FctSpline2D">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">skyllh.analyses.i3.publicdata_ps.utils.</span></span><span class="sig-name descname"><span class="pre">FctSpline2D</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x_binedges</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_binedges</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.utils.FctSpline2D" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class to represent a 2D function spline using the RectBivariateSpline
class from scipy.</p>
<p>The spline is constructed in the log10 space of the function value to
ensure a smooth spline.</p>
<p>The evaluate the spline, use the <code class="docutils literal notranslate"><span class="pre">__call__</span></code> method.</p>
<p>Creates a new 2D function spline using the RectBivariateSpline
class from scipy.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>f</strong> (<em>(</em><em>n_x</em><em>, </em><em>n_y</em><em>)</em><em>-shaped 2D numpy ndarray</em>) – he numpy ndarray holding the function values at the bin centers.</p></li>
<li><p><strong>x_binedges</strong> (<em>(</em><em>n_x+1</em><em>,</em><em>)</em><em>-shaped 1D numpy ndarray</em>) – The numpy ndarray holding the bin edges of the x-axis.</p></li>
<li><p><strong>y_binedges</strong> (<em>(</em><em>n_y+1</em><em>,</em><em>)</em><em>-shaped 1D numpy ndarray</em>) – The numpy ndarray holding the bin edges of the y-axis.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.utils.FctSpline2D.__call__">
<span class="sig-name descname"><span class="pre">__call__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">oor_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.utils.FctSpline2D.__call__" title="Link to this definition"></a></dt>
<dd><p>Evaluates the spline at the given coordinates. For coordinates
outside the spline’s range, the oor_value is returned.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>(</em><em>n_x</em><em>,</em><em>)</em><em>-shaped 1D numpy ndarray</em>) – The numpy ndarray holding the x values at which the spline should
get evaluated.</p></li>
<li><p><strong>y</strong> (<em>(</em><em>n_y</em><em>,</em><em>)</em><em>-shaped 1D numpy ndarray</em>) – The numpy ndarray holding the y values at which the spline should
get evaluated.</p></li>
<li><p><strong>oor_value</strong> (<em>float</em>) – The value for out-of-range (oor) coordinates.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>f</strong> (<em>(n_x, n_y)-shaped 2D numpy ndarray</em>) – The numpy ndarray holding the evaluated values of the spline.</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.utils.FctSpline2D.__firstlineno__">
<span class="sig-name descname"><span class="pre">__firstlineno__</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">82</span></em><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.utils.FctSpline2D.__firstlineno__" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.utils.FctSpline2D.__static_attributes__">
<span class="sig-name descname"><span class="pre">__static_attributes__</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">('spl_log10_f',</span> <span class="pre">'x_binedges',</span> <span class="pre">'x_max',</span> <span class="pre">'x_min',</span> <span class="pre">'y_binedges',</span> <span class="pre">'y_max',</span> <span class="pre">'y_min')</span></em><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.utils.FctSpline2D.__static_attributes__" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.utils.psi_to_dec_and_ra">
<span class="sig-prename descclassname"><span class="pre">skyllh.analyses.i3.publicdata_ps.utils.</span></span><span class="sig-name descname"><span class="pre">psi_to_dec_and_ra</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rss</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_dec</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_ra</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">psi</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.utils.psi_to_dec_and_ra" title="Link to this definition"></a></dt>
<dd><p>Generates random declinations and right-ascension coordinates for the
given source location and opening angle <cite>psi</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>rss</strong> (<em>instance</em><em> of </em><a class="reference internal" href="skyllh.core.html#skyllh.core.random.RandomStateService" title="skyllh.core.random.RandomStateService"><em>RandomStateService</em></a>) – The instance of RandomStateService to use for drawing random numbers.</p></li>
<li><p><strong>src_dec</strong> (<em>float</em>) – The declination of the source in radians.</p></li>
<li><p><strong>src_ra</strong> (<em>float</em>) – The right-ascension of the source in radians.</p></li>
<li><p><strong>psi</strong> (<em>1d ndarray</em><em> of </em><em>float</em>) – The opening-angle values in radians.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>dec</strong> (<em>1d ndarray of float</em>) – The declination values.</p></li>
<li><p><strong>ra</strong> (<em>1d ndarray of float</em>) – The right-ascension values.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="skyllh.analyses.i3.publicdata_ps.utils.create_energy_cut_spline">
<span class="sig-prename descclassname"><span class="pre">skyllh.analyses.i3.publicdata_ps.utils.</span></span><span class="sig-name descname"><span class="pre">create_energy_cut_spline</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exp_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spl_smooth</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skyllh.analyses.i3.publicdata_ps.utils.create_energy_cut_spline" title="Link to this definition"></a></dt>
<dd><p>Create the spline for the declination-dependent energy cut
that the signal generator needs for injection in the southern sky
Some special conditions are needed for IC79 and IC86_I, because
their experimental dataset shows events that should probably have
been cut by the IceCube selection.</p>
</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="skyllh.analyses.i3.html" class="btn btn-neutral float-left" title="skyllh.analyses.i3 package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="skyllh.cluster.html" class="btn btn-neutral float-right" title="skyllh.cluster package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, The IceCube Collaboration, T. Kontrimas, M. Wolf.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Other Versions</span>
    v: v23.1.1
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
      <dt>Branches</dt>
      <dd><a href="../../../master/html/index.html">master</a></dd>
      <dd><a href="../../../coords/html/index.html">coords</a></dd>
      <dd><a href="../../../data_release/html/index.html">data_release</a></dd>
      <dd><a href="../../../dm/html/index.html">dm</a></dd>
      <dd><a href="../../../fix169_fix203/html/index.html">fix169_fix203</a></dd>
      <dd><a href="../../../fix230/html/index.html">fix230</a></dd>
      <dd><a href="../../../llh_module/html/index.html">llh_module</a></dd>
      <dd><a href="../../../signal_gen_method/html/index.html">signal_gen_method</a></dd>
      <dd><a href="../../../stack_public/html/index.html">stack_public</a></dd>
    </dl>
    <dl>
      <dt>Tags</dt>
      <dd><a href="../../../v19_09_15/html/index.html">v19_09_15</a></dd>
      <dd><a href="../../../v20_01_09/html/index.html">v20_01_09</a></dd>
      <dd><a href="../../../v20_03_12/html/index.html">v20_03_12</a></dd>
      <dd><a href="../../../v20_11_02/html/index.html">v20_11_02</a></dd>
      <dd><a href="../../../v21_10_18_temp/html/index.html">v21_10_18_temp</a></dd>
      <dd><a href="../../../v21_10_20/html/index.html">v21_10_20</a></dd>
      <dd><a href="../../../v22_04_28/html/index.html">v22_04_28</a></dd>
      <dd><a href="../../../v22_04_28a/html/index.html">v22_04_28a</a></dd>
      <dd><a href="../../../v23.0.0/html/index.html">v23.0.0</a></dd>
      <dd><a href="../../../v23.1.0/html/index.html">v23.1.0</a></dd>
      <dd><a href="skyllh.analyses.i3.publicdata_ps.html">v23.1.1</a></dd>
      <dd><a href="../../../v23.2.0/html/index.html">v23.2.0</a></dd>
      <dd><a href="../../../v23.2.1/html/index.html">v23.2.1</a></dd>
      <dd><a href="../../../v23.2.1.rc1/html/index.html">v23.2.1.rc1</a></dd>
      <dd><a href="../../../v24.1.0/html/index.html">v24.1.0</a></dd>
      <dd><a href="../../../v24.1.1a/html/index.html">v24.1.1a</a></dd>
    </dl>
  </div>
</div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>